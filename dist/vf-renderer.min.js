/*!
 * @vf-renderer v0.0.1 
 * Mon, 14 Jan 2019 07:36:34 UTC 
 * https://github.com/vfjs/vf-renderer
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("vf",[],t):"object"==typeof exports?exports.vf=t():e.vf=t()}(window,function(){return function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=22)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VERSION="0.0.1",t.PI_2=2*Math.PI,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},t.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},t.SCALE_MODES={LINEAR:0,NEAREST:1},t.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},t.GC_MODES={AUTO:0,MANUAL:1},t.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,t.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},t.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},t.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},t.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},t.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return f(n).default}});var i=r(23);Object.defineProperty(t,"ObservablePoint",{enumerable:!0,get:function(){return f(i).default}});var a=r(9);Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return f(a).default}});var o=r(15);Object.defineProperty(t,"GroupD8",{enumerable:!0,get:function(){return f(o).default}});var s=r(24);Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return f(s).default}});var u=r(25);Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return f(u).default}});var h=r(26);Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return f(h).default}});var l=r(10);Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return f(l).default}});var c=r(27);function f(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"RoundedRectangle",{enumerable:!0,get:function(){return f(c).default}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(r(28)),i=a(r(29));function a(e){return e&&e.__esModule?e:{default:e}}t.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,n.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,i.default)(),MESH_CANVAS_PADDING:0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.premultiplyBlendMode=t.BaseTextureCache=t.TextureCache=t.mixins=t.pluginTarget=t.EventEmitter=t.removeItems=void 0,t.uid=function(){return++c},t.hex2rgb=function(e,t){return(t=t||[])[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(255&e)/255,t},t.hex2string=function(e){return e=e.toString(16),"#"+(e="000000".substr(0,6-e.length)+e)},t.rgb2hex=function(e){return(255*e[0]<<16)+(255*e[1]<<8)+(255*e[2]|0)},t.getResolutionOfUrl=function(e,t){var r=i.default.RETINA_PREFIX.exec(e);if(r)return parseFloat(r[1]);return void 0!==t?t:1},t.decomposeDataUri=function(e){var t=n.DATA_URI.exec(e);if(t)return{mediaType:t[1]?t[1].toLowerCase():void 0,subType:t[2]?t[2].toLowerCase():void 0,charset:t[3]?t[3].toLowerCase():void 0,encoding:t[4]?t[4].toLowerCase():void 0,data:t[5]};return},t.getUrlFileExtension=function(e){var t=n.URL_FILE_EXTENSION.exec(e);if(t)return t[1].toLowerCase();return},t.getSvgSize=function(e){var t=n.SVG_SIZE.exec(e),r={};t&&(r[t[1]]=Math.round(parseFloat(t[3])),r[t[5]]=Math.round(parseFloat(t[7])));return r},t.skipHello=function(){f=!0},t.sayHello=function(e){if(f)return;if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var t=["\n %c %c %c vf-renderer v "+n.VERSION+" - âœ° "+e+" %c %c \n\n","background: #ff6611; padding:5px 0;","background: #ff6611; padding:5px 0;","color: #ff6611; background: #030307; padding:5px 0;","background: #ff6611; padding:5px 0;","background: #ff6611; padding:5px 0;","background: #ff6611; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("SINTJS "+n.VERSION+" - "+e+" - http://www.sintlib.com/");f=!0},t.isWebGLSupported=function(){var e={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var t=document.createElement("canvas"),r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e),n=!(!r||!r.getContextAttributes().stencil);if(r){var i=r.getExtension("WEBGL_lose_context");i&&i.loseContext()}return r=null,n}catch(e){return!1}},t.sign=function(e){return 0===e?0:e<0?-1:1},t.destroyTextureCache=function(){var e=void 0;for(e in d)d[e].destroy();for(e in p)p[e].destroy()},t.clearTextureCache=function(){var e=void 0;for(e in d)delete d[e];for(e in p)delete p[e]},t.correctBlendMode=function(e,t){return v[t?1:0][e]},t.premultiplyTint=function(e,t){if(1===t)return(255*t<<24)+e;if(0===t)return 0;var r=e>>16&255,n=e>>8&255,i=255&e;return(255*t<<24)+((r=r*t+.5|0)<<16)+((n=n*t+.5|0)<<8)+(i=i*t+.5|0)},t.premultiplyRgba=function(e,t,r,n){r=r||new Float32Array(4),r[2]=n||void 0===n?(r[0]=e[0]*t,r[1]=e[1]*t,e[2]*t):(r[0]=e[0],r[1]=e[1],e[2]);return r[3]=t,r},t.premultiplyTintToRgba=function(e,t,r,n){(r=r||new Float32Array(4))[0]=(e>>16&255)/255,r[1]=(e>>8&255)/255,r[2]=(255&e)/255,(n||void 0===n)&&(r[0]*=t,r[1]*=t,r[2]*=t);return r[3]=t,r};var n=r(0),i=l(r(2)),a=l(r(5)),o=l(r(33)),s=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(34)),u=l(r(35)),h=l(r(36));function l(e){return e&&e.__esModule?e:{default:e}}var c=0,f=!1;t.removeItems=u.default,t.EventEmitter=a.default,t.pluginTarget=o.default,t.mixins=s;var d=t.TextureCache=Object.create(null),p=t.BaseTextureCache=Object.create(null);var v=t.premultiplyBlendMode=(0,h.default)()},function(e,t,r){window,e.exports=function(r){var n={};function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}return i.m=r,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=10)}([function(e,t){var a=null,o={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(e,t){if(!a){var r=Object.keys(o);a={};for(var n=0;n<r.length;++n){var i=r[n];a[e[i]]=o[i]}}return a[t]}},function(e,t){e.exports=function(e,t,r){var n;if(r){var i=r.tempAttribState,a=r.attribState;for(n=0;n<i.length;n++)i[n]=!1;for(n=0;n<t.length;n++)i[t[n].attribute.location]=!0;for(n=0;n<a.length;n++)a[n]!==i[n]&&(a[n]=i[n],r.attribState[n]?e.enableVertexAttribArray(n):e.disableVertexAttribArray(n))}else for(n=0;n<t.length;n++){var o=t[n];e.enableVertexAttribArray(o.attribute.location)}}},function(e,t){var a=function(e,t,r,n,i){this.gl=e,this.texture=e.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=t||-1,this.height=r||-1,this.format=n||e.RGBA,this.type=i||e.UNSIGNED_BYTE},i=!(a.prototype.upload=function(e){this.bind();var t=this.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=e.videoWidth||e.width,n=e.videoHeight||e.height;n!==this.height||r!==this.width?t.texImage2D(t.TEXTURE_2D,0,this.format,this.format,this.type,e):t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.format,this.type,e),this.width=r,this.height=n});a.prototype.uploadData=function(e,t,r){this.bind();var n=this.gl;if(e instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),t!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,t,r,0,this.format,this.type,e||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,t,r,this.format,this.type,e||null),this.width=t,this.height=r},a.prototype.bind=function(e){var t=this.gl;void 0!==e&&t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,this.texture)},a.prototype.unbind=function(){var e=this.gl;e.bindTexture(e.TEXTURE_2D,null)},a.prototype.minFilter=function(e){var t=this.gl;this.bind(),this.mipmap?t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.NEAREST_MIPMAP_NEAREST):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR:t.NEAREST)},a.prototype.magFilter=function(e){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e?t.LINEAR:t.NEAREST)},a.prototype.enableMipmap=function(){var e=this.gl;this.bind(),this.mipmap=!0,e.generateMipmap(e.TEXTURE_2D)},a.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},a.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},a.prototype.enableWrapClamp=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)},a.prototype.enableWrapRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)},a.prototype.enableWrapMirrorRepeat=function(){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT)},a.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},a.fromSource=function(e,t,r){var n=new a(e);return n.premultiplyAlpha=r||!1,n.upload(t),n},a.fromData=function(e,t,r,n){var i=new a(e);return i.uploadData(t,r,n),i},e.exports=a},function(e,t){var u=function(e,t,r){var n=e.createShader(t);return e.shaderSource(n,r),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS)?n:(console.log(e.getShaderInfoLog(n)),null)};e.exports=function(e,t,r,n){var i=u(e,e.VERTEX_SHADER,t),a=u(e,e.FRAGMENT_SHADER,r),o=e.createProgram();if(e.attachShader(o,i),e.attachShader(o,a),n)for(var s in n)e.bindAttribLocation(o,n[s],s);return e.linkProgram(o),e.getProgramParameter(o,e.LINK_STATUS)||(console.error("gl-core Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",e.getProgramParameter(o,e.VALIDATE_STATUS)),console.error("gl.getError()",e.getError()),""!==e.getProgramInfoLog(o)&&console.warn("gl-core Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(o)),e.deleteProgram(o),o=null),e.deleteShader(i),e.deleteShader(a),o}},function(e,t,r){var s=r(0),u=r(5),h=function(e,t,r,n){gl.vertexAttribPointer(this.location,this.size,e||gl.FLOAT,t||!1,r||0,n||0)};e.exports=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),i=0;i<n;i++){var a=e.getActiveAttrib(t,i),o=s(e,a.type);r[a.name]={type:o,size:u(o),location:e.getAttribLocation(t,a.name),pointer:h}}return r}},function(e,t){var r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(e){return r[e]}},function(e,t,r){var u=r(0),h=r(7);e.exports=function(e,t){for(var r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),i=0;i<n;i++){var a=e.getActiveUniform(t,i),o=a.name.replace(/\[.*?\]/,""),s=u(e,a.type);r[o]={type:s,size:a.size,location:e.getUniformLocation(t,o),value:h(s,a.size)}}return r}},function(e,t){var r=function(e){for(var t=new Array(e),r=0;r<t.length;r++)t[r]=!1;return t};e.exports=function(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"bool":return!1;case"bvec2":return r(2*t);case"bvec3":return r(3*t);case"bvec4":return r(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(e,t){e.exports=function(e,t){return"precision"!==e.substring(0,9)?"precision "+t+" float;\n"+e:e}},function(e,t){var l=function(e){return function(){return this.data[e].value}},i={float:function(e,t,r){e.uniform1f(t,r)},vec2:function(e,t,r){e.uniform2f(t,r[0],r[1])},vec3:function(e,t,r){e.uniform3f(t,r[0],r[1],r[2])},vec4:function(e,t,r){e.uniform4f(t,r[0],r[1],r[2],r[3])},int:function(e,t,r){e.uniform1i(t,r)},ivec2:function(e,t,r){e.uniform2i(t,r[0],r[1])},ivec3:function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},ivec4:function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},bool:function(e,t,r){e.uniform1i(t,r)},bvec2:function(e,t,r){e.uniform2i(t,r[0],r[1])},bvec3:function(e,t,r){e.uniform3i(t,r[0],r[1],r[2])},bvec4:function(e,t,r){e.uniform4i(t,r[0],r[1],r[2],r[3])},mat2:function(e,t,r){e.uniformMatrix2fv(t,!1,r)},mat3:function(e,t,r){e.uniformMatrix3fv(t,!1,r)},mat4:function(e,t,r){e.uniformMatrix4fv(t,!1,r)},sampler2D:function(e,t,r){e.uniform1i(t,r)}},a={float:function(e,t,r){e.uniform1fv(t,r)},vec2:function(e,t,r){e.uniform2fv(t,r)},vec3:function(e,t,r){e.uniform3fv(t,r)},vec4:function(e,t,r){e.uniform4fv(t,r)},int:function(e,t,r){e.uniform1iv(t,r)},ivec2:function(e,t,r){e.uniform2iv(t,r)},ivec3:function(e,t,r){e.uniform3iv(t,r)},ivec4:function(e,t,r){e.uniform4iv(t,r)},bool:function(e,t,r){e.uniform1iv(t,r)},bvec2:function(e,t,r){e.uniform2iv(t,r)},bvec3:function(e,t,r){e.uniform3iv(t,r)},bvec4:function(e,t,r){e.uniform4iv(t,r)},sampler2D:function(e,t,r){e.uniform1iv(t,r)}};function c(r,n){return function(e){this.data[r].value=e;var t=this.data[r].location;1===n.size?i[n.type](this.gl,t,e):a[n.type](this.gl,t,e)}}function f(e,t){for(var r=t,n=0;n<e.length-1;n++){var i=r[e[n]]||{data:{}};r[e[n]]=i,r=i}return r}e.exports=function(e,t){var r={data:{}};r.gl=e;for(var n=Object.keys(t),i=0;i<n.length;i++){var a=n[i],o=a.split("."),s=o[o.length-1],u=f(o,r),h=t[a];u.data[s]=h,u.gl=e,Object.defineProperty(u,s,{get:l(s),set:c(s,h)})}return r}},function(e,t,r){var n={createContext:r(11),setVertexAttribArrays:r(1),GLBuffer:r(12),GLFramebuffer:r(13),GLShader:r(14),GLTexture:r(2),VertexArrayObject:r(15),shader:r(16)};e.exports&&(e.exports=n),"undefined"!=typeof window&&(window.vf=window.vf||{},window.vf.glCore=n)},function(e,t){e.exports=function(e,t){var r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},function(e,t){var i=new ArrayBuffer(0),a=function(e,t,r,n){this.gl=e,this.buffer=e.createBuffer(),this.type=t||e.ARRAY_BUFFER,this.drawType=n||e.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0};a.prototype.upload=function(e,t,r){r||this.bind();var n=this.gl;e=e||this.data,t=t||0,this.data.byteLength>=e.byteLength?n.bufferSubData(this.type,t,e):n.bufferData(this.type,e,this.drawType),this.data=e},a.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},a.createVertexBuffer=function(e,t,r){return new a(e,e.ARRAY_BUFFER,t,r)},a.createIndexBuffer=function(e,t,r){return new a(e,e.ELEMENT_ARRAY_BUFFER,t,r)},a.create=function(e,t,r,n){return new a(e,t,r,n)},a.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=a},function(e,t,r){var o=r(2),s=function(e,t,r){this.gl=e,this.framebuffer=e.createFramebuffer(),this.stencil=null,this.texture=null,this.width=t||100,this.height=r||100};s.prototype.enableTexture=function(e){var t=this.gl;this.texture=e||new o(t),this.texture.bind(),this.bind(),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture.texture,0)},s.prototype.enableStencil=function(){if(!this.stencil){var e=this.gl;this.stencil=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.stencil),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,this.stencil),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,this.width,this.height)}},s.prototype.clear=function(e,t,r,n){this.bind();var i=this.gl;i.clearColor(e,t,r,n),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT)},s.prototype.bind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer)},s.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},s.prototype.resize=function(e,t){var r=this.gl;this.width=e,this.height=t,this.texture&&this.texture.uploadData(null,e,t),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e,t))},s.prototype.destroy=function(){var e=this.gl;this.texture&&this.texture.destroy(),e.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},s.createRGBA=function(e,t,r,n){var i=o.fromData(e,null,t,r);i.enableNearestScaling(),i.enableWrapClamp();var a=new s(e,t,r);return a.enableTexture(i),a.unbind(),a},s.createFloat32=function(e,t,r,n){var i=new o.fromData(e,n,t,r);i.enableNearestScaling(),i.enableWrapClamp();var a=new s(e,t,r);return a.enableTexture(i),a.unbind(),a},e.exports=s},function(e,t,r){var a=r(3),o=r(4),s=r(6),u=r(8),h=r(9),n=function(e,t,r,n,i){this.gl=e,n&&(t=u(t,n),r=u(r,n)),this.program=a(e,t,r,i),this.attributes=o(e,this.program),this.uniformData=s(e,this.program),this.uniforms=h(e,this.uniformData)};n.prototype.bind=function(){return this.gl.useProgram(this.program),this},n.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=n},function(e,t,r){var i=r(1);function n(e,t){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=t,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=e.getParameter(e.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=e,this.attributes=[],this.indexBuffer=null,this.dirty=!1}n.prototype.constructor=n,(e.exports=n).FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var e=this.gl,t=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];t!==n.buffer&&(n.buffer.bind(),t=n.buffer),e.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||e.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(e,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(e,t,r,n,i,a){return this.attributes.push({buffer:e,attribute:t,location:t.location,type:r||this.gl.FLOAT,normalized:n||!1,stride:i||0,start:a||0}),this.dirty=!0,this},n.prototype.addIndex=function(e){return this.indexBuffer=e,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(e,t,r){var n=this.gl;return this.indexBuffer?n.drawElements(e,t||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(r||0)):n.drawArrays(e,r,t||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var e=this.attributes[0];return e.buffer.data.length/(e.stride/4||e.attribute.size)}},function(e,t,r){e.exports={compileProgram:r(3),defaultValue:r(7),extractAttributes:r(4),extractUniforms:r(6),generateUniformAccessObject:r(9),setPrecision:r(8),mapSize:r(5),mapType:r(0)}}])},function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,d="~";function i(){}function s(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function a(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new s(r,n||e,i),o=d?d+t:t;return e._events[o]?e._events[o].fn?e._events[o]=[e._events[o],a]:e._events[o].push(a):(e._events[o]=a,e._eventsCount++),e}function h(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(d=!1)),o.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},o.prototype.listeners=function(e){var t=d?d+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,a=new Array(i);n<i;n++)a[n]=r[n].fn;return a},o.prototype.listenerCount=function(e){var t=d?d+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,n,i,a){var o=d?d+e:e;if(!this._events[o])return!1;var s,u,h=this._events[o],l=arguments.length;if(h.fn){switch(h.once&&this.removeListener(e,h.fn,void 0,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,i),!0;case 6:return h.fn.call(h.context,t,r,n,i,a),!0}for(u=1,s=new Array(l-1);u<l;u++)s[u-1]=arguments[u];h.fn.apply(h.context,s)}else{var c,f=h.length;for(u=0;u<f;u++)switch(h[u].once&&this.removeListener(e,h[u].fn,void 0,!0),l){case 1:h[u].fn.call(h[u].context);break;case 2:h[u].fn.call(h[u].context,t);break;case 3:h[u].fn.call(h[u].context,t,r);break;case 4:h[u].fn.call(h[u].context,t,r,n);break;default:if(!s)for(c=1,s=new Array(l-1);c<l;c++)s[c-1]=arguments[c];h[u].fn.apply(h[u].context,s)}}return!0},o.prototype.on=function(e,t,r){return a(this,e,t,r,!1)},o.prototype.once=function(e,t,r){return a(this,e,t,r,!0)},o.prototype.removeListener=function(e,t,r,n){var i=d?d+e:e;if(!this._events[i])return this;if(!t)return h(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||n&&!a.once||r&&a.context!==r||h(this,i);else{for(var o=0,s=[],u=a.length;o<u;o++)(a[o].fn!==t||n&&!a[o].once||r&&a[o].context!==r)&&s.push(a[o]);s.length?this._events[i]=1===s.length?s[0]:s:h(this,i)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=d?d+e:e,this._events[t]&&h(this,t)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=d,o.EventEmitter=o,e.exports=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=r(3),i=o(r(2)),a=o(r(5)),u=o(r(37)),h=o(r(12));function o(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function o(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(o.__proto__||Object.getPrototypeOf(o)).call(this));return n.uid=(0,s.uid)(),n.touched=0,n.resolution=r||i.default.RESOLUTION,n.width=100,n.height=100,n.realWidth=100,n.realHeight=100,n.scaleMode=void 0!==t?t:i.default.SCALE_MODE,n.hasLoaded=!1,n.isLoading=!1,n.source=null,n.origSource=null,n.imageType=null,n.sourceScale=1,n.premultipliedAlpha=!0,n.imageUrl=null,n.isPowerOfTwo=!1,n.mipmap=i.default.MIPMAP_TEXTURES,n.wrapMode=i.default.WRAP_MODE,n._glTextures={},n._enabled=0,n._virtalBoundId=-1,n._destroyed=!1,n.textureCacheIds=[],e&&n.loadSource(e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,a.default),n(o,[{key:"update",value:function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)}},{key:"_updateDimensions",value:function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=h.default.isPow2(this.realWidth)&&h.default.isPow2(this.realHeight)}},{key:"loadSource",value:function(e){var t=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,t&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(((this.source=e).src&&e.complete||e.getContext)&&e.width&&e.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!e.getContext){this.isLoading=!0;var n=this;if(e.onload=function(){n._updateImageType(),e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n._sourceLoaded(),"svg"!==n.imageType?n.emit("loaded",n):n._loadSvgSource())},e.onerror=function(){e.onload=null,e.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},e.complete&&e.src){if(e.onload=null,e.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,e.width&&e.height?(this._sourceLoaded(),t&&this.emit("loaded",this)):t&&this.emit("error",this)}}}},{key:"_updateImageType",value:function(){if(this.imageUrl){var e=(0,s.decomposeDataUri)(this.imageUrl),t=void 0;if(e&&"image"===e.mediaType){var r=e.subType.split("+")[0];if(!(t=(0,s.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(t=(0,s.getUrlFileExtension)(this.imageUrl))||(t="png");this.imageType=t}}},{key:"_loadSvgSource",value:function(){if("svg"===this.imageType){var e=(0,s.decomposeDataUri)(this.imageUrl);e?this._loadSvgSourceUsingDataUri(e):this._loadSvgSourceUsingXhr()}}},{key:"_loadSvgSourceUsingDataUri",value:function(e){var t=void 0;if("base64"===e.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");t=atob(e.data)}else t=e.data;this._loadSvgSourceUsingString(t)}},{key:"_loadSvgSourceUsingXhr",value:function(){var e=this,t=new XMLHttpRequest;t.onload=function(){if(t.readyState!==t.DONE||200!==t.status)throw new Error("Failed to load SVG using XHR.");e._loadSvgSourceUsingString(t.response)},t.onerror=function(){return e.emit("error",e)},t.open("GET",this.imageUrl,!0),t.send()}},{key:"_loadSvgSourceUsingString",value:function(e){var t=(0,s.getSvgSize)(e),r=t.width,n=t.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var i=document.createElement("canvas");i.width=this.realWidth,i.height=this.realHeight,i._SINTId="canvas_"+(0,s.uid)(),i.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=i,o.addToCache(this,i._SINTId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)}},{key:"_sourceLoaded",value:function(){this.hasLoaded=!0,this.update()}},{key:"destroy",value:function(){this.imageUrl&&(delete s.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),o.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0}},{key:"dispose",value:function(){this.emit("dispose",this)}},{key:"updateSourceImage",value:function(e){this.source.src=e,this.loadSource(this.source)}}],[{key:"fromImage",value:function(e,t,r,n){var i=s.BaseTextureCache[e];if(!i){var a=new Image;void 0===t&&0!==e.indexOf("data:")?a.crossOrigin=(0,u.default)(e):t&&(a.crossOrigin="string"==typeof t?t:"anonymous"),(i=new o(a,r)).imageUrl=e,n&&(i.sourceScale=n),i.resolution=(0,s.getResolutionOfUrl)(e),a.src=e,o.addToCache(i,e)}return i}},{key:"fromCanvas",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";e._SINTId||(e._SINTId=r+"_"+(0,s.uid)());var n=s.BaseTextureCache[e._SINTId];return n||(n=new o(e,t),o.addToCache(n,e._SINTId)),n}},{key:"from",value:function(e,t,r){if("string"==typeof e)return o.fromImage(e,void 0,t,r);if(e instanceof HTMLImageElement){var n=e.src,i=s.BaseTextureCache[n];return i||((i=new o(e,t)).imageUrl=n,r&&(i.sourceScale=r),i.resolution=(0,s.getResolutionOfUrl)(n),o.addToCache(i,n)),i}return e instanceof HTMLCanvasElement?o.fromCanvas(e,t):e}},{key:"addToCache",value:function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),s.BaseTextureCache[t]&&console.warn("BaseTexture added to the cache with an id ["+t+"] that already had an entry"),s.BaseTextureCache[t]=e)}},{key:"removeFromCache",value:function(e){if("string"==typeof e){var t=s.BaseTextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return-1<r&&t.textureCacheIds.splice(r,1),delete s.BaseTextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)delete s.BaseTextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}}]),o}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return n(t,[{key:"onContextChange",value:function(){}},{key:"destroy",value:function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null}}]),t}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function r(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this.x=e,this.y=t}return n(r,[{key:"clone",value:function(){return new r(this.x,this.y)}},{key:"copy",value:function(e){this.set(e.x,e.y)}},{key:"equals",value:function(e){return e.x===this.x&&e.y===this.y}},{key:"set",value:function(e,t){this.x=e||0,this.y=t||(0!==t?this.x:0)}}]),r}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(8),s=(n=a)&&n.__esModule?n:{default:n},u=r(0);var o=function(){function o(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=a,this.array=null}return i(o,[{key:"fromArray",value:function(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}},{key:"set",value:function(e,t,r,n,i,a){return this.a=e,this.b=t,this.c=r,this.d=n,this.tx=i,this.ty=a,this}},{key:"toArray",value:function(e,t){this.array||(this.array=new Float32Array(9));var r=t||this.array;return r[8]=(r[7]=e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0),1),r}},{key:"apply",value:function(e,t){t=t||new s.default;var r=e.x,n=e.y;return t.x=this.a*r+this.c*n+this.tx,t.y=this.b*r+this.d*n+this.ty,t}},{key:"applyInverse",value:function(e,t){t=t||new s.default;var r=1/(this.a*this.d+this.c*-this.b),n=e.x,i=e.y;return t.x=this.d*r*n+-this.c*r*i+(this.ty*this.c-this.tx*this.d)*r,t.y=this.a*r*i+-this.b*r*n+(-this.ty*this.a+this.tx*this.b)*r,t}},{key:"translate",value:function(e,t){return this.tx+=e,this.ty+=t,this}},{key:"scale",value:function(e,t){return this.a*=e,this.d*=t,this.c*=e,this.b*=t,this.tx*=e,this.ty*=t,this}},{key:"rotate",value:function(e){var t=Math.cos(e),r=Math.sin(e),n=this.a,i=this.c,a=this.tx;return this.a=n*t-this.b*r,this.b=n*r+this.b*t,this.c=i*t-this.d*r,this.d=i*r+this.d*t,this.tx=a*t-this.ty*r,this.ty=a*r+this.ty*t,this}},{key:"append",value:function(e){var t=this.a,r=this.b,n=this.c,i=this.d;return this.a=e.a*t+e.b*n,this.b=e.a*r+e.b*i,this.c=e.c*t+e.d*n,this.d=e.c*r+e.d*i,this.tx=e.tx*t+e.ty*n+this.tx,this.ty=e.tx*r+e.ty*i+this.ty,this}},{key:"setTransform",value:function(e,t,r,n,i,a,o,s,u){return this.a=Math.cos(o+u)*i,this.b=Math.sin(o+u)*i,this.c=-Math.sin(o-s)*a,this.d=Math.cos(o-s)*a,this.tx=e-(r*this.a+n*this.c),this.ty=t-(r*this.b+n*this.d),this}},{key:"prepend",value:function(e){var t=this.tx;if(1!==e.a||0!==e.b||0!==e.c||1!==e.d){var r=this.a,n=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=n*e.a+this.d*e.c,this.d=n*e.b+this.d*e.d}return this.tx=t*e.a+this.ty*e.c+e.tx,this.ty=t*e.b+this.ty*e.d+e.ty,this}},{key:"decompose",value:function(e){var t=this.a,r=this.b,n=this.c,i=this.d,a=-Math.atan2(-n,i),o=Math.atan2(r,t),s=Math.abs(a+o);return s<1e-5||Math.abs(u.PI_2-s)<1e-5?(e.rotation=o,t<0&&0<=i&&(e.rotation+=e.rotation<=0?Math.PI:-Math.PI),e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=o),e.scale.x=Math.sqrt(t*t+r*r),e.scale.y=Math.sqrt(n*n+i*i),e.position.x=this.tx,e.position.y=this.ty,e}},{key:"invert",value:function(){var e=this.a,t=this.b,r=this.c,n=this.d,i=this.tx,a=e*n-t*r;return this.a=n/a,this.b=-t/a,this.c=-r/a,this.d=e/a,this.tx=(r*this.ty-n*i)/a,this.ty=-(e*this.ty-t*i)/a,this}},{key:"identity",value:function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}},{key:"clone",value:function(){var e=new o;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}},{key:"copy",value:function(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}}],[{key:"IDENTITY",get:function(){return new o}},{key:"TEMP_MATRIX",get:function(){return new o}}]),o}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0);var i=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.x=Number(e),this.y=Number(t),this.width=Number(r),this.height=Number(n),this.type=a.SHAPES.RECT}return n(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.width,this.height)}},{key:"copy",value:function(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}},{key:"contains",value:function(e,t){return!(this.width<=0||this.height<=0)&&(e>=this.x&&e<this.x+this.width&&t>=this.y&&t<this.y+this.height)}},{key:"pad",value:function(e,t){e=e||0,t=t||(0!==t?e:0),this.x-=e,this.y-=t,this.width+=2*e,this.height+=2*t}},{key:"fit",value:function(e){this.x<e.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=e.x),this.y<e.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=e.y),this.x+this.width>e.x+e.width&&(this.width=e.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>e.y+e.height&&(this.height=e.height-this.y,this.height<0&&(this.height=0))}},{key:"enlarge",value:function(e){var t=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),n=Math.min(this.y,e.y),i=Math.max(this.y+this.height,e.y+e.height);this.x=t,this.width=r-t,this.y=n,this.height=i-n}},{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new i(0,0,0,0)}}]),i}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=r(3),i=r(16),s=(n=i)&&n.__esModule?n:{default:n};var u=function(e){function i(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this));return e.children=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,s.default),a(i,[{key:"onChildrenChange",value:function(){}},{key:"addChild",value:function(e){var t=arguments.length;if(1<t)for(var r=0;r<t;r++)this.addChild(arguments[r]);else e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),e.emit("added",this);return e}},{key:"addChildAt",value:function(e,t){if(t<0||t>this.children.length)throw new Error(e+"addChildAt: The index "+t+" supplied is out of bounds "+this.children.length);return e.parent&&e.parent.removeChild(e),e.parent=this,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),e}},{key:"swapChildren",value:function(e,t){if(e!==t){var r=this.getChildIndex(e),n=this.getChildIndex(t);this.children[r]=t,this.children[n]=e,this.onChildrenChange(r<n?r:n)}}},{key:"getChildIndex",value:function(e){var t=this.children.indexOf(e);if(-1===t)throw new Error("The supplied DisplayObject must be a child of the caller");return t}},{key:"setChildIndex",value:function(e,t){if(t<0||t>=this.children.length)throw new Error("The index "+t+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(e);(0,o.removeItems)(this.children,r,1),this.children.splice(t,0,e),this.onChildrenChange(t)}},{key:"getChildAt",value:function(e){if(e<0||e>=this.children.length)throw new Error("getChildAt: Index ("+e+") does not exist.");return this.children[e]}},{key:"removeChild",value:function(e){var t=arguments.length;if(1<t)for(var r=0;r<t;r++)this.removeChild(arguments[r]);else{var n=this.children.indexOf(e);if(-1===n)return null;e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this)}return e}},{key:"removeChildAt",value:function(e){var t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),t}},{key:"removeChildren",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=arguments[1],r=e,n="number"==typeof t?t:this.children.length,i=n-r,a=void 0;if(0<i&&i<=n){a=this.children.splice(r,i);for(var o=0;o<a.length;++o)a[o].parent=null,a[o].transform&&(a[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(var s=0;s<a.length;++s)a[s].emit("removed",this);return a}if(0===i&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}},{key:"updateTransform",value:function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var e=0,t=this.children.length;e<t;++e){var r=this.children[e];r.visible&&r.updateTransform()}}},{key:"calculateBounds",value:function(){this._bounds.clear(),this._calculateBounds();for(var e=0;e<this.children.length;e++){var t=this.children[e];t.visible&&t.renderable&&(t.calculateBounds(),t._mask?(t._mask.calculateBounds(),this._bounds.addBoundsMask(t._bounds,t._mask._bounds)):t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds))}this._lastBoundsID=this._boundsID}},{key:"_calculateBounds",value:function(){}},{key:"renderWebGL",value:function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(e);else{this._renderWebGL(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderWebGL(e)}}},{key:"renderAdvancedWebGL",value:function(e){e.flush();var t=this._filters,r=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]);for(var n=this._enabledFilters.length=0;n<t.length;n++)t[n].enabled&&this._enabledFilters.push(t[n]);this._enabledFilters.length&&e.filterManager.pushFilter(this,this._enabledFilters)}r&&e.maskManager.pushMask(this,this._mask),this._renderWebGL(e);for(var i=0,a=this.children.length;i<a;i++)this.children[i].renderWebGL(e);e.flush(),r&&e.maskManager.popMask(this,this._mask),t&&this._enabledFilters&&this._enabledFilters.length&&e.filterManager.popFilter()}},{key:"_renderWebGL",value:function(e){}},{key:"_renderCanvas",value:function(e){}},{key:"renderCanvas",value:function(e){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&e.maskManager.pushMask(this._mask),this._renderCanvas(e);for(var t=0,r=this.children.length;t<r;++t)this.children[t].renderCanvas(e);this._mask&&e.maskManager.popMask(e)}}},{key:"destroy",value:function(e){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0})(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this);var t="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(t)for(var n=0;n<r.length;++n)r[n].destroy(e)}},{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(e){var t=this.getLocalBounds().width;this.scale.x=0!==t?e/t:1,this._width=e}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(e){var t=this.getLocalBounds().height;this.scale.y=0!==t?e/t:1,this._height=e}}]),i}();(t.default=u).prototype.containerUpdateTransform=u.prototype.updateTransform},function(e,t,r){"use strict";function n(e){var t=32;return(e&=-e)&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-1<<31,t.sign=function(e){return(0<e)-(e<0)},t.abs=function(e){var t=e>>31;return(e^t)-t},t.min=function(e,t){return t^(e^t)&-(e<t)},t.max=function(e,t){return e^(e^t)&-(e<t)},t.isPow2=function(e){return!(e&e-1||!e)},t.log2=function(e){var t,r;return t=(65535<e)<<4,t|=r=(255<(e>>>=t))<<3,t|=r=(15<(e>>>=r))<<2,(t|=r=(3<(e>>>=r))<<1)|(e>>>=r)>>1},t.log10=function(e){return 1e9<=e?9:1e8<=e?8:1e7<=e?7:1e6<=e?6:1e5<=e?5:1e4<=e?4:1e3<=e?3:100<=e?2:10<=e?1:0},t.popCount=function(e){return 16843009*((e=(858993459&(e-=e>>>1&1431655765))+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},t.countTrailingZeros=n,t.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},t.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},t.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var i=new Array(256);!function(e){for(var t=0;t<256;++t){var r=t,n=t,i=7;for(r>>>=1;r;r>>>=1)n<<=1,n|=1&r,--i;e[t]=n<<i&255}}(i),t.reverse=function(e){return i[255&e]<<24|i[e>>>8&255]<<16|i[e>>>16&255]<<8|i[e>>>24&255]},t.interleave2=function(e,t){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))<<1},t.deinterleave2=function(e,t){return(e=65535&((e=16711935&((e=252645135&((e=858993459&((e=e>>>t&1431655765)|e>>>1))|e>>>2))|e>>>4))|e>>>16))<<16>>16},t.interleave3=function(e,t,r){return e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2),(e|=(t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},t.deinterleave3=function(e,t){return(e=1023&((e=4278190335&((e=251719695&((e=3272356035&((e=e>>>t&1227133513)|e>>>2))|e>>>4))|e>>>8))|e>>>16))<<22>>22},t.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>n(e)+1}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=s(r(6)),i=s(r(46)),o=s(r(5)),u=r(1),h=r(3),l=s(r(2));function s(e){return e&&e.__esModule?e:{default:e}}var c=function(e){function s(e,t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var o=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(s.__proto__||Object.getPrototypeOf(s)).call(this));if(o.noFrame=!1,t||(o.noFrame=!0,t=new u.Rectangle(0,0,1,1)),e instanceof s&&(e=e.baseTexture),o.baseTexture=e,o._frame=t,o.trim=n,o.valid=!1,o.requiresUpdate=!1,o._uvs=null,o.orig=r||t,o._rotate=Number(i||0),!0===i)o._rotate=2;else if(o._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return e.hasLoaded?(o.noFrame&&(t=new u.Rectangle(0,0,e.width,e.height),e.on("update",o.onBaseTextureUpdated,o)),o.frame=t):e.once("loaded",o.onBaseTextureLoaded,o),o.defaultAnchor=a?new u.Point(a.x,a.y):new u.Point(0,0),o._updateID=0,o.transform=null,o.textureCacheIds=[],o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,o.default),n(s,[{key:"update",value:function(){this.baseTexture.update()}},{key:"onBaseTextureLoaded",value:function(e){this._updateID++,this.noFrame?this.frame=new u.Rectangle(0,0,e.width,e.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)}},{key:"onBaseTextureUpdated",value:function(e){this._updateID++,this._frame.width=e.width,this._frame.height=e.height,this.emit("update",this)}},{key:"destroy",value:function(e){this.baseTexture&&(e&&(h.TextureCache[this.baseTexture.imageUrl]&&s.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,s.removeFromCache(this),this.textureCacheIds=null}},{key:"clone",value:function(){return new s(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)}},{key:"_updateUvs",value:function(){this._uvs||(this._uvs=new i.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}},{key:"frame",get:function(){return this._frame},set:function(e){this._frame=e,this.noFrame=!1;var t=e.x,r=e.y,n=e.width,i=e.height,a=t+n>this.baseTexture.width,o=r+i>this.baseTexture.height;if(a||o){var s=a&&o?"and":"or",u="X: "+t+" + "+n+" = "+(t+n)+" > "+this.baseTexture.width,h="Y: "+r+" + "+i+" = "+(r+i)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+u+" "+s+" "+h)}this.valid=n&&i&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=e),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(e){this._rotate=e,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}],[{key:"fromImage",value:function(e,t,r,n){var i=h.TextureCache[e];return i||(i=new s(a.default.fromImage(e,t,r,n)),s.addToCache(i,e)),i}},{key:"fromFrame",value:function(e){var t=h.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return t}},{key:"fromCanvas",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new s(a.default.fromCanvas(e,t,r))}},{key:"from",value:function(e){return e instanceof HTMLImageElement?new s(a.default.from(e)):e instanceof HTMLCanvasElement?s.fromCanvas(e,l.default.SCALE_MODE,"HTMLCanvasElement"):e instanceof HTMLVideoElement?s.fromVideo(e):e instanceof a.default?new s(e):e}},{key:"fromLoader",value:function(e,t,r){var n=new a.default(e,void 0,(0,h.getResolutionOfUrl)(t)),i=new s(n);return n.imageUrl=t,r||(r=t),a.default.addToCache(i.baseTexture,r),s.addToCache(i,r),r!==t&&(a.default.addToCache(i.baseTexture,t),s.addToCache(i,t)),i}},{key:"addToCache",value:function(e,t){t&&(-1===e.textureCacheIds.indexOf(t)&&e.textureCacheIds.push(t),h.TextureCache[t]&&console.warn("Texture added to the cache with an id ["+t+"] that already had an entry"),h.TextureCache[t]=e)}},{key:"removeFromCache",value:function(e){if("string"==typeof e){var t=h.TextureCache[e];if(t){var r=t.textureCacheIds.indexOf(e);return-1<r&&t.textureCacheIds.splice(r,1),delete h.TextureCache[e],t}}else if(e&&e.textureCacheIds){for(var n=0;n<e.textureCacheIds.length;++n)h.TextureCache[e.textureCacheIds[n]]===e&&delete h.TextureCache[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}}]),s}();function f(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}(t.default=c).EMPTY=new c(new a.default),f(c.EMPTY),f(c.EMPTY.baseTexture),c.WHITE=function(){var e=document.createElement("canvas");e.width=10,e.height=10;var t=e.getContext("2d");return t.fillStyle="white",t.fillRect(0,0,10,10),new c(new a.default(e))}(),f(c.WHITE),f(c.WHITE.baseTexture)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),s=r(1),u=r(0),a=r(2),h=(n=a)&&n.__esModule?n:{default:n},l=r(4);var o=function(){function o(e,t,r,n,i,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new s.Rectangle(0,0,1,1),this.resolution=i||h.default.RESOLUTION,this.projectionMatrix=new s.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new s.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==n?n:h.default.SCALE_MODE,this.root=a||!1,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===u.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(t,r)}return i(o,[{key:"clear",value:function(e){var t=e||this.clearColor;this.frameBuffer.clear(t[0],t[1],t[2],t[3])}},{key:"attachStencilBuffer",value:function(){this.root||this.frameBuffer.enableStencil()}},{key:"setFrame",value:function(e,t){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=t||this.sourceFrame||this.destinationFrame}},{key:"activate",value:function(){var e=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(e.enable(e.SCISSOR_TEST),e.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):e.disable(e.SCISSOR_TEST),e.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)}},{key:"calculateProjection",value:function(e,t){var r=this.projectionMatrix;t=t||e,r.identity(),this.root?(r.a=1/e.width*2,r.d=-1/e.height*2,r.tx=-1-t.x*r.a,r.ty=1-t.y*r.d):(r.a=1/e.width*2,r.d=1/e.height*2,r.tx=-1-t.x*r.a,r.ty=-1-t.y*r.d)}},{key:"resize",value:function(e,t){if(e|=0,t|=0,this.size.width!==e||this.size.height!==t){this.size.width=e,this.size.height=t,this.defaultFrame.width=e,this.defaultFrame.height=t,this.frameBuffer.resize(e*this.resolution,t*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}}},{key:"destroy",value:function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null}}]),o}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(9),l=(n=i)&&n.__esModule?n:{default:n};var c=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],f=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],d=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],p=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],v=[],y=[];function _(e){return e<0?-1:0<e?1:0}!function(){for(var e=0;e<16;e++){var t=[];y.push(t);for(var r=0;r<16;r++)for(var n=_(c[e]*c[r]+d[e]*f[r]),i=_(f[e]*c[r]+p[e]*f[r]),a=_(c[e]*d[r]+d[e]*p[r]),o=_(f[e]*d[r]+p[e]*p[r]),s=0;s<16;s++)if(c[s]===n&&f[s]===i&&d[s]===a&&p[s]===o){t.push(s);break}}for(var u=0;u<16;u++){var h=new l.default;h.set(c[u],f[u],d[u],p[u],0,0),v.push(h)}}();var a={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(e){return c[e]},uY:function(e){return f[e]},vX:function(e){return d[e]},vY:function(e){return p[e]},inv:function(e){return 8&e?15&e:7&-e},add:function(e,t){return y[e][t]},sub:function(e,t){return y[e][a.inv(t)]},rotate180:function(e){return 4^e},isVertical:function(e){return 2==(3&e)},byDirection:function(e,t){return 2*Math.abs(e)<=Math.abs(t)?0<=t?a.S:a.N:2*Math.abs(t)<=Math.abs(e)?0<e?a.E:a.W:0<t?0<e?a.SE:a.SW:0<e?a.NE:a.NW},matrixAppendRotationInv:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=v[a.inv(t)];i.tx=r,i.ty=n,e.append(i)}};t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=c(r(5)),a=r(0),o=c(r(2)),s=c(r(30)),u=c(r(31)),h=c(r(32)),l=r(1);function c(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function r(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this)),t=o.default.TRANSFORM_MODE===a.TRANSFORM_MODE.STATIC?s.default:u.default;return e.tempDisplayObjectParent=null,e.transform=new t,e.alpha=1,e.visible=!0,e.renderable=!0,e.parent=null,e.worldAlpha=1,e.filterArea=null,e._filters=null,e._enabledFilters=null,e._bounds=new h.default,e._boundsID=0,e._lastBoundsID=-1,e._boundsRect=null,e._localBoundsRect=null,e._mask=null,e._destroyed=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.default),n(r,[{key:"updateTransform",value:function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++}},{key:"_recursivePostUpdateTransform",value:function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}},{key:"getBounds",value:function(e,t){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),t||(this._boundsRect||(this._boundsRect=new l.Rectangle),t=this._boundsRect),this._bounds.getRectangle(t)}},{key:"getLocalBounds",value:function(e){var t=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,e||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),e=this._localBoundsRect);var n=this.getBounds(!1,e);return this.parent=r,this.transform=t,n}},{key:"toGlobal",value:function(e,t){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,t)}},{key:"toLocal",value:function(e,t,r,n){return t&&(e=t.toGlobal(e,r,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}},{key:"renderWebGL",value:function(e){}},{key:"renderCanvas",value:function(e){}},{key:"setParent",value:function(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}},{key:"setTransform",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,a=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,u=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=e,this.position.y=t,this.scale.x=r||1,this.scale.y=n||1,this.rotation=i,this.skew.x=a,this.skew.y=o,this.pivot.x=s,this.pivot.y=u,this}},{key:"destroy",value:function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0}},{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new r),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(e){this.transform.position.x=e}},{key:"y",get:function(){return this.position.y},set:function(e){this.transform.position.y=e}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(e){this.transform.position.copy(e)}},{key:"scale",get:function(){return this.transform.scale},set:function(e){this.transform.scale.copy(e)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(e){this.transform.pivot.copy(e)}},{key:"skew",get:function(){return this.transform.skew},set:function(e){this.transform.skew.copy(e)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(e){this.transform.rotation=e}},{key:"worldVisible",get:function(){var e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}},{key:"mask",get:function(){return this._mask},set:function(e){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=e,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(e){this._filters=e&&e.slice()}}]),r}();(t.default=f).prototype.displayObjectUpdateTransform=f.prototype.updateTransform},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(1);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}return n(e,[{key:"updateLocalTransform",value:function(){}},{key:"updateTransform",value:function(e){var t=e.worldTransform,r=this.worldTransform,n=this.localTransform;r.a=n.a*t.a+n.b*t.c,r.b=n.a*t.b+n.b*t.d,r.c=n.c*t.a+n.d*t.c,r.d=n.c*t.b+n.d*t.d,r.tx=n.tx*t.a+n.ty*t.c+t.tx,r.ty=n.tx*t.b+n.ty*t.d+t.ty,this._worldID++}}]),e}();(t.default=a).prototype.updateWorldTransform=a.prototype.updateTransform,a.IDENTITY=new a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(7),o=(n=a)&&n.__esModule?n:{default:n};var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.default),i(t,[{key:"start",value:function(){}},{key:"stop",value:function(){this.flush()}},{key:"flush",value:function(){}},{key:"render",value:function(e){}}]),t}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=g(r(49)),o=g(r(52)),s=g(r(59)),u=g(r(60)),h=g(r(14)),l=g(r(18)),c=g(r(63)),f=g(r(6)),d=g(r(64)),p=g(r(65)),v=(g(r(67)),g(r(68))),i=r(3),y=g(r(4)),_=r(0);function g(e){return e&&e.__esModule?e:{default:e}}var m=0,b=function(e){function i(e,t,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,"WebGL",e,t,r));return n.legacy=n.options.legacy,n.legacy&&(y.default.VertexArrayObject.FORCE_NATIVE=!0),n.type=_.RENDERER_TYPE.WEBGL,n.handleContextLost=n.handleContextLost.bind(n),n.handleContextRestored=n.handleContextRestored.bind(n),n.view.addEventListener("webglcontextlost",n.handleContextLost,!1),n.view.addEventListener("webglcontextrestored",n.handleContextRestored,!1),n._contextOptions={alpha:n.transparent,antialias:n.options.antialias,premultipliedAlpha:n.transparent&&"notMultiplied"!==n.transparent,stencil:!0,preserveDrawingBuffer:n.options.preserveDrawingBuffer,powerPreference:n.options.powerPreference},n._backgroundColorRgba[3]=n.transparent?0:1,n.maskManager=new o.default(n),n.stencilManager=new s.default(n),n.emptyRenderer=new l.default(n),n.currentRenderer=n.emptyRenderer,n.textureManager=null,n.filterManager=null,n.initPlugins(),n.options.context&&(0,v.default)(n.options.context),n.gl=n.options.context||y.default.createContext(n.view,n._contextOptions),n.CONTEXT_UID=m++,n.state=new p.default(n.gl),n.renderingToScreen=!0,n.boundTextures=null,n._activeShader=null,n._activeVao=null,n._activeRenderTarget=null,n._initContext(),n._nextTextureLocation=0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),n(i,[{key:"_initContext",value:function(){var e=this.gl;e.isContextLost()&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").restoreContext();var t=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(t),this.emptyTextures=new Array(t),this.textureManager=new c.default(this),this.filterManager=new u.default(this),this.textureGC=new d.default(this),this.state.resetToDefault(),this.rootRenderTarget=new h.default(e,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new y.default.GLTexture.fromData(e,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var i=0;i<t;i++){var a=new f.default;a._glTextures[this.CONTEXT_UID]=r,this.boundTextures[i]=n,this.emptyTextures[i]=a,this.bindTexture(null,i)}this.emit("context",e),this.resize(this.screen.width,this.screen.height)}},{key:"render",value:function(e,t,r,n,i){if(this.renderingToScreen=!t,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,t||(this._lastObjectRendered=e),!i){var a=e.parent;e.parent=this._tempDisplayObjectParent,e.updateTransform(),e.parent=a}this.bindRenderTexture(t,n),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),e.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}}},{key:"setObjectRenderer",value:function(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start(),console.log("setObjectRenderer"))}},{key:"flush",value:function(){this.setObjectRenderer(this.emptyRenderer)}},{key:"resize",value:function(e,t){a.default.prototype.resize.call(this,e,t),this.rootRenderTarget.resize(e,t),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))}},{key:"setBlendMode",value:function(e){this.state.setBlendMode(e)}},{key:"clear",value:function(e){this._activeRenderTarget.clear(e)}},{key:"setTransform",value:function(e){this._activeRenderTarget.transform=e}},{key:"clearRenderTexture",value:function(e,t){var r=e.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(t),this}},{key:"bindRenderTexture",value:function(e,t){var r=void 0;if(e){var n=e.baseTexture;n._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(n,0),this.unbindTexture(n),(r=n._glRenderTargets[this.CONTEXT_UID]).setFrame(e.frame)}else r=this.rootRenderTarget;return r.transform=t,this.bindRenderTarget(r),this}},{key:"bindRenderTarget",value:function(e){return e!==this._activeRenderTarget&&((this._activeRenderTarget=e).activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=e.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(e.stencilMaskStack)),this}},{key:"bindShader",value:function(e){var t=!(1<arguments.length&&void 0!==arguments[1])||arguments[1];return this._activeShader!==e&&((this._activeShader=e).bind(),!1!==t&&(e.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this}},{key:"bindTexture",value:function(e,t,r){if((e=(e=e||this.emptyTextures[t]).baseTexture||e).touched=this.textureGC.count,r)t=t||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===e)return n;void 0===t&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,t=this.boundTextures.length-this._nextTextureLocation-1)}var i=this.gl,a=e._glTextures[this.CONTEXT_UID];return a?(this.boundTextures[t]=e,i.activeTexture(i.TEXTURE0+t),i.bindTexture(i.TEXTURE_2D,a.texture)):this.textureManager.updateTexture(e,t),t}},{key:"unbindTexture",value:function(e){var t=this.gl;e=e.baseTexture||e;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===e&&(this.boundTextures[r]=this.emptyTextures[r],t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this}},{key:"createVao",value:function(){return new y.default.VertexArrayObject(this.gl,this.state.attribState)}},{key:"bindVao",value:function(e){return this._activeVao===e||(e?e.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=e),this}},{key:"reset",value:function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget;for(var e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.emptyTextures[e];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this}},{key:"handleContextLost",value:function(e){e.preventDefault()}},{key:"handleContextRestored",value:function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()}},{key:"destroy",value:function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null}}]),i}();t.default=b,i.pluginTarget.mixin(b)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=6*e,r=new Uint16Array(t),n=0,i=0;n<t;n+=6,i+=4)r[n+0]=i+0,r[n+1]=i+1,r[n+2]=i+2,r[n+3]=i+0,r[n+4]=i+2,r[n+5]=i+3;return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r(4),a=r(2),o=(n=a)&&n.__esModule?n:{default:n};function s(e,t){if(e instanceof Array){if("precision"!==e[0].substring(0,9)){var r=e.slice(0);return r.unshift("precision "+t+" float;"),r}}else if("precision"!==e.trim().substring(0,9))return"precision "+t+" float;\n"+e;return e}var u=function(e){function a(e,t,r,n,i){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e,s(t,i||o.default.PRECISION_VERTEX),s(r,i||o.default.PRECISION_FRAGMENT),void 0,n))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.GLShader),a}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpriteRenderer=t.Sprite=t.Texture=t.BaseTexture=t.Container=t.DisplayObject=t.WebGLRenderer=t.ticker=t.utils=void 0;var n=r(0);Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var i=r(1);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=r(16);Object.defineProperty(t,"DisplayObject",{enumerable:!0,get:function(){return v(a).default}});var o=r(11);Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return v(o).default}});var s=r(6);Object.defineProperty(t,"BaseTexture",{enumerable:!0,get:function(){return v(s).default}});var u=r(13);Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return v(u).default}});var h=r(47);Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return v(h).default}});var l=r(48);Object.defineProperty(t,"SpriteRenderer",{enumerable:!0,get:function(){return v(l).default}});var c=p(r(3)),f=p(r(75)),d=v(r(19));function p(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function v(e){return e&&e.__esModule?e:{default:e}}t.utils=c,t.ticker=f,t.WebGLRenderer=d.default,"undefined"!=typeof window&&(window.vf=window.vf||{},window.vf.renderer=t)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function i(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this._x=r,this._y=n,this.cb=e,this.scope=t}return n(i,[{key:"clone",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;return new i(e||this.cb,t||this.scope,this._x,this._y)}},{key:"set",value:function(e,t){var r=e||0,n=t||(0!==t?r:0);this._x===r&&this._y===n||(this._x=r,this._y=n,this.cb.call(this.scope))}},{key:"copy",value:function(e){this._x===e.x&&this._y===e.y||(this._x=e.x,this._y=e.y,this.cb.call(this.scope))}},{key:"equals",value:function(e){return e.x===this._x&&e.y===this._y}},{key:"x",get:function(){return this._x},set:function(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}]),i}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(10),o=(n=a)&&n.__esModule?n:{default:n},s=r(0);var u=function(){function n(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.x=e,this.y=t,this.radius=r,this.type=s.SHAPES.CIRC}return i(n,[{key:"clone",value:function(){return new n(this.x,this.y,this.radius)}},{key:"contains",value:function(e,t){if(this.radius<=0)return!1;var r=this.radius*this.radius,n=this.x-e,i=this.y-t;return(n*=n)+(i*=i)<=r}},{key:"getBounds",value:function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)}}]),n}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(10),o=(n=i)&&n.__esModule?n:{default:n},s=r(0);var u=function(){function i(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.x=e,this.y=t,this.width=r,this.height=n,this.type=s.SHAPES.ELIP}return a(i,[{key:"clone",value:function(){return new i(this.x,this.y,this.width,this.height)}},{key:"contains",value:function(e,t){if(this.width<=0||this.height<=0)return!1;var r=(e-this.x)/this.width,n=(t-this.y)/this.height;return(r*=r)+(n*=n)<=1}},{key:"getBounds",value:function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)}}]),i}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(8),s=(n=a)&&n.__esModule?n:{default:n},u=r(0);var o=function(){function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Array.isArray(t[0])&&(t=t[0]),t[0]instanceof s.default){for(var n=[],i=0,a=t.length;i<a;i++)n.push(t[i].x,t[i].y);t=n}this.closed=!0,this.points=t,this.type=u.SHAPES.POLY}return i(o,[{key:"clone",value:function(){return new o(this.points.slice())}},{key:"close",value:function(){var e=this.points;e[0]===e[e.length-2]&&e[1]===e[e.length-1]||e.push(e[0],e[1])}},{key:"contains",value:function(e,t){for(var r=!1,n=this.points.length/2,i=0,a=n-1;i<n;a=i++){var o=this.points[2*i],s=this.points[2*i+1],u=this.points[2*a],h=this.points[2*a+1];t<s!=t<h&&e<(t-s)/(h-s)*(u-o)+o&&(r=!r)}return r}}]),o}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=r(0);var i=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=e,this.y=t,this.width=r,this.height=n,this.radius=i,this.type=o.SHAPES.RREC}return n(a,[{key:"clone",value:function(){return new a(this.x,this.y,this.width,this.height,this.radius)}},{key:"contains",value:function(e,t){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height){if(t>=this.y+this.radius&&t<=this.y+this.height-this.radius||e>=this.x+this.radius&&e<=this.x+this.width-this.radius)return!0;var r=e-(this.x+this.radius),n=t-(this.y+this.radius),i=this.radius*this.radius;if(r*r+n*n<=i)return!0;if((r=e-(this.x+this.width-this.radius))*r+n*n<=i)return!0;if(r*r+(n=t-(this.y+this.height-this.radius))*n<=i)return!0;if((r=e-(this.x+this.radius))*r+n*n<=i)return!0}return!1}}]),a}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(1),o=r(17),s=(n=o)&&n.__esModule?n:{default:n};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.position=new a.ObservablePoint(e.onChange,e,0,0),e.scale=new a.ObservablePoint(e.onChange,e,1,1),e.pivot=new a.ObservablePoint(e.onChange,e,0,0),e.skew=new a.ObservablePoint(e.updateSkew,e,0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e._localID=0,e._currentLocalID=0,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"onChange",value:function(){this._localID++}},{key:"updateSkew",value:function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++}},{key:"updateLocalTransform",value:function(){var e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}},{key:"updateTransform",value:function(e){var t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._parentID=e._worldID,this._worldID++}}},{key:"setFromMatrix",value:function(e){e.decompose(this),this._localID++}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}}]),t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(1),o=r(17),s=(n=o)&&n.__esModule?n:{default:n};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.position=new a.Point(0,0),e.scale=new a.Point(1,1),e.skew=new a.ObservablePoint(e.updateSkew,e,0,0),e.pivot=new a.Point(0,0),e._rotation=0,e._cx=1,e._sx=0,e._cy=0,e._sy=1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.default),i(t,[{key:"updateSkew",value:function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)}},{key:"updateLocalTransform",value:function(){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d)}},{key:"updateTransform",value:function(e){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d);var r=e.worldTransform,n=this.worldTransform;n.a=t.a*r.a+t.b*r.c,n.b=t.a*r.b+t.b*r.d,n.c=t.c*r.a+t.d*r.c,n.d=t.c*r.b+t.d*r.d,n.tx=t.tx*r.a+t.ty*r.c+r.tx,n.ty=t.tx*r.b+t.ty*r.d+r.ty,this._worldID++}},{key:"setFromMatrix",value:function(e){e.decompose(this)}},{key:"rotation",get:function(){return this._rotation},set:function(e){this._rotation=e,this.updateSkew()}}]),t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=r(1);var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return n(e,[{key:"isEmpty",value:function(){return this.minX>this.maxX||this.minY>this.maxY}},{key:"clear",value:function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}},{key:"getRectangle",value:function(e){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:((e=e||new i.Rectangle(0,0,1,1)).x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}},{key:"addPoint",value:function(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}},{key:"addQuad",value:function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY,a=e[0],o=e[1];t=a<t?a:t,r=o<r?o:r,n=n<a?a:n,i=i<o?o:i,t=(a=e[2])<t?a:t,r=(o=e[3])<r?o:r,n=n<a?a:n,i=i<o?o:i,t=(a=e[4])<t?a:t,r=(o=e[5])<r?o:r,n=n<a?a:n,i=i<o?o:i,t=(a=e[6])<t?a:t,r=(o=e[7])<r?o:r,n=n<a?a:n,i=i<o?o:i,this.minX=t,this.minY=r,this.maxX=n,this.maxY=i}},{key:"addFrame",value:function(e,t,r,n,i){var a=e.worldTransform,o=a.a,s=a.b,u=a.c,h=a.d,l=a.tx,c=a.ty,f=this.minX,d=this.minY,p=this.maxX,v=this.maxY,y=o*t+u*r+l,_=s*t+h*r+c;f=y<f?y:f,d=_<d?_:d,p=p<y?y:p,v=v<_?_:v,f=(y=o*n+u*r+l)<f?y:f,d=(_=s*n+h*r+c)<d?_:d,p=p<y?y:p,v=v<_?_:v,f=(y=o*t+u*i+l)<f?y:f,d=(_=s*t+h*i+c)<d?_:d,p=p<y?y:p,v=v<_?_:v,f=(y=o*n+u*i+l)<f?y:f,d=(_=s*n+h*i+c)<d?_:d,p=p<y?y:p,v=v<_?_:v,this.minX=f,this.minY=d,this.maxX=p,this.maxY=v}},{key:"addVertices",value:function(e,t,r,n){for(var i=e.worldTransform,a=i.a,o=i.b,s=i.c,u=i.d,h=i.tx,l=i.ty,c=this.minX,f=this.minY,d=this.maxX,p=this.maxY,v=r;v<n;v+=2){var y=t[v],_=t[v+1],g=a*y+s*_+h,m=u*_+o*y+l;c=g<c?g:c,f=m<f?m:f,d=d<g?g:d,p=p<m?m:p}this.minX=c,this.minY=f,this.maxX=d,this.maxY=p}},{key:"addBounds",value:function(e){var t=this.minX,r=this.minY,n=this.maxX,i=this.maxY;this.minX=e.minX<t?e.minX:t,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>n?e.maxX:n,this.maxY=e.maxY>i?e.maxY:i}},{key:"addBoundsMask",value:function(e,t){var r=e.minX>t.minX?e.minX:t.minX,n=e.minY>t.minY?e.minY:t.minY,i=e.maxX<t.maxX?e.maxX:t.maxX,a=e.maxY<t.maxY?e.maxY:t.maxY;if(r<=i&&n<=a){var o=this.minX,s=this.minY,u=this.maxX,h=this.maxY;this.minX=r<o?r:o,this.minY=n<s?n:s,this.maxX=u<i?i:u,this.maxY=h<a?a:h}}},{key:"addBoundsArea",value:function(e,t){var r=e.minX>t.x?e.minX:t.x,n=e.minY>t.y?e.minY:t.y,i=e.maxX<t.x+t.width?e.maxX:t.x+t.width,a=e.maxY<t.y+t.height?e.maxY:t.y+t.height;if(r<=i&&n<=a){var o=this.minX,s=this.minY,u=this.maxX,h=this.maxY;this.minX=r<o?r:o,this.minY=n<s?n:s,this.maxX=u<i?i:u,this.maxY=h<a?a:h}}}]),e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={mixin:function(e){var r;(r=e).__plugins={},r.registerPlugin=function(e,t){r.__plugins[e]=t},r.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},r.__plugins)this.plugins[e]=new r.__plugins[e](this)},r.prototype.destroyPlugins=function(){for(var e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null;this.plugins=null}}}},function(e,t,r){"use strict";function n(e,t){if(e&&t)for(var r=Object.keys(t),n=0;n<r.length;++n){var i=r[n];Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}}Object.defineProperty(t,"__esModule",{value:!0}),t.mixin=n,t.delayMixin=function(e,t){i.push(e,t)},t.performMixins=function(){for(var e=0;e<i.length;e+=2)n(i[e],i[e+1]);i.length=0};var i=[]},function(e,t,r){"use strict";e.exports=function(e,t,r){var n,i=e.length;if(!(i<=t||0===r)){var a=i-(r=i<t+r?i-t:r);for(n=t;n<a;++n)e[n]=e[n+r];e.length=a}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){for(var e=[],t=[],r=0;r<32;r++)e[r]=r,t[r]=r;e[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,e[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,e[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,t[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,t[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,t[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(t),n.push(e),n};var i=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===e.indexOf("data:"))return"";t=t||window.location,o||(o=document.createElement("a"));o.href=e;var r=!(e=a.default.parse(o.href)).port&&""===t.port||e.port===t.port;return e.hostname===t.hostname&&r&&e.protocol===t.protocol?"":"anonymous"};var n,i=r(38),a=(n=i)&&n.__esModule?n:{default:n};var o=void 0},function(e,t,r){"use strict";var A=r(39),D=r(42);function M(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=a,t.resolve=function(e,t){return a(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?a(e,!1,!0).resolveObject(t):t},t.format=function(e){D.isString(e)&&(e=a(e));return e instanceof M?e.format():M.prototype.format.call(e)},t.Url=M;var L=/^([a-z0-9.+-]+:)/i,n=/:[0-9]*$/,j=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,i=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),N=["'"].concat(i),F=["%","/","?",";","#"].concat(N),U=["/","?","#"],B=/^[+a-z0-9A-Z_-]{0,63}$/,X=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,G={javascript:!0,"javascript:":!0},V={javascript:!0,"javascript:":!0},Y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},W=r(43);function a(e,t,r){if(e&&D.isObject(e)&&e instanceof M)return e;var n=new M;return n.parse(e,t,r),n}M.prototype.parse=function(e,t,r){if(!D.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),i=-1!==n&&n<e.indexOf("#")?"?":"#",a=e.split(i);a[0]=a[0].replace(/\\/g,"/");var o=e=a.join(i);if(o=o.trim(),!r&&1===e.split("#").length){var s=j.exec(o);if(s)return this.path=o,this.href=o,this.pathname=s[1],s[2]?(this.search=s[2],this.query=t?W.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var u=L.exec(o);if(u){var h=(u=u[0]).toLowerCase();this.protocol=h,o=o.substr(u.length)}if(r||u||o.match(/^\/\/[^@\/]+@[^@\/]+/)){var l="//"===o.substr(0,2);!l||u&&V[u]||(o=o.substr(2),this.slashes=!0)}if(!V[u]&&(l||u&&!Y[u])){for(var c,f,d=-1,p=0;p<U.length;p++){-1!==(v=o.indexOf(U[p]))&&(-1===d||v<d)&&(d=v)}-1!==(f=-1===d?o.lastIndexOf("@"):o.lastIndexOf("@",d))&&(c=o.slice(0,f),o=o.slice(f+1),this.auth=decodeURIComponent(c)),d=-1;for(p=0;p<F.length;p++){var v;-1!==(v=o.indexOf(F[p]))&&(-1===d||v<d)&&(d=v)}-1===d&&(d=o.length),this.host=o.slice(0,d),o=o.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!y)for(var _=this.hostname.split(/\./),g=(p=0,_.length);p<g;p++){var m=_[p];if(m&&!m.match(B)){for(var b="",x=0,T=m.length;x<T;x++)127<m.charCodeAt(x)?b+="x":b+=m[x];if(!b.match(B)){var w=_.slice(0,p),E=_.slice(p+1),O=m.match(X);O&&(w.push(O[1]),E.unshift(O[2])),E.length&&(o="/"+E.join(".")+o),this.hostname=w.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=A.toASCII(this.hostname));var S=this.port?":"+this.port:"",M=this.hostname||"";this.host=M+S,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==o[0]&&(o="/"+o))}if(!G[h])for(p=0,g=N.length;p<g;p++){var k=N[p];if(-1!==o.indexOf(k)){var R=encodeURIComponent(k);R===k&&(R=escape(k)),o=o.split(k).join(R)}}var C=o.indexOf("#");-1!==C&&(this.hash=o.substr(C),o=o.slice(0,C));var P=o.indexOf("?");if(-1!==P?(this.search=o.substr(P),this.query=o.substr(P+1),t&&(this.query=W.parse(this.query)),o=o.slice(0,P)):t&&(this.search="",this.query={}),o&&(this.pathname=o),Y[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){S=this.pathname||"";var I=this.search||"";this.path=S+I}return this.href=this.format(),this},M.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,a="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&D.isObject(this.query)&&Object.keys(this.query).length&&(a=W.stringify(this.query));var o=this.search||a&&"?"+a||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||Y[t])&&!1!==i?(i="//"+(i||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):i||(i=""),n&&"#"!==n.charAt(0)&&(n="#"+n),o&&"?"!==o.charAt(0)&&(o="?"+o),t+i+(r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}))+(o=o.replace("#","%23"))+n},M.prototype.resolve=function(e){return this.resolveObject(a(e,!1,!0)).format()},M.prototype.resolveObject=function(e){if(D.isString(e)){var t=new M;t.parse(e,!1,!0),e=t}for(var r=new M,n=Object.keys(this),i=0;i<n.length;i++){var a=n[i];r[a]=this[a]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),s=0;s<o.length;s++){var u=o[s];"protocol"!==u&&(r[u]=e[u])}return Y[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!Y[e.protocol]){for(var h=Object.keys(e),l=0;l<h.length;l++){var c=h[l];r[c]=e[c]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||V[e.protocol])r.pathname=e.pathname;else{for(var f=(e.pathname||"").split("/");f.length&&!(e.host=f.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==f[0]&&f.unshift(""),f.length<2&&f.unshift(""),r.pathname=f.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var d=r.pathname||"",p=r.search||"";r.path=d+p}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var v=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),_=y||v||r.host&&e.pathname,g=_,m=r.pathname&&r.pathname.split("/")||[],b=(f=e.pathname&&e.pathname.split("/")||[],r.protocol&&!Y[r.protocol]);if(b&&(r.hostname="",r.port=null,r.host&&(""===m[0]?m[0]=r.host:m.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===f[0]?f[0]=e.host:f.unshift(e.host)),e.host=null),_=_&&(""===f[0]||""===m[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,m=f;else if(f.length)m||(m=[]),m.pop(),m=m.concat(f),r.search=e.search,r.query=e.query;else if(!D.isNullOrUndefined(e.search)){if(b)r.hostname=r.host=m.shift(),(O=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift());return r.search=e.search,r.query=e.query,D.isNull(r.pathname)&&D.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!m.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var x=m.slice(-1)[0],T=(r.host||e.host||1<m.length)&&("."===x||".."===x)||""===x,w=0,E=m.length;0<=E;E--)"."===(x=m[E])?m.splice(E,1):".."===x?(m.splice(E,1),w++):w&&(m.splice(E,1),w--);if(!_&&!g)for(;w--;w)m.unshift("..");!_||""===m[0]||m[0]&&"/"===m[0].charAt(0)||m.unshift(""),T&&"/"!==m.join("/").substr(-1)&&m.push("");var O,S=""===m[0]||m[0]&&"/"===m[0].charAt(0);b&&(r.hostname=r.host=S?"":m.length?m.shift():"",(O=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=O.shift(),r.host=r.hostname=O.shift()));return(_=_||r.host&&m.length)&&!S&&m.unshift(""),m.length?r.pathname=m.join("/"):(r.pathname=null,r.path=null),D.isNull(r.pathname)&&D.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},M.prototype.parseHost=function(){var e=this.host,t=n.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,P,I){(function(p,v){var y;!function(e){P&&P.nodeType,p&&p.nodeType;var t="object"==typeof v&&v;t.global!==t&&t.window!==t&&t.self;var r,_=2147483647,g=36,m=1,b=26,i=38,a=700,x=72,T=128,w="-",n=/^xn--/,o=/[^\x20-\x7E]/,s=/[\x2E\u3002\uFF0E\uFF61]/g,u={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=g-m,E=Math.floor,O=String.fromCharCode;function S(e){throw new RangeError(u[e])}function l(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function c(e,t){var r=e.split("@"),n="";return 1<r.length&&(n=r[0]+"@",e=r[1]),n+l((e=e.replace(s,".")).split("."),t).join(".")}function M(e){for(var t,r,n=[],i=0,a=e.length;i<a;)55296<=(t=e.charCodeAt(i++))&&t<=56319&&i<a?56320==(64512&(r=e.charCodeAt(i++)))?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),i--):n.push(t);return n}function k(e){return l(e,function(e){var t="";return 65535<e&&(t+=O((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=O(e)}).join("")}function R(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function C(e,t,r){var n=0;for(e=r?E(e/a):e>>1,e+=E(e/t);h*b>>1<e;n+=g)e=E(e/h);return E(n+(h+1)*e/(e+i))}function f(e){var t,r,n,i,a,o,s,u,h,l,c,f=[],d=e.length,p=0,v=T,y=x;for((r=e.lastIndexOf(w))<0&&(r=0),n=0;n<r;++n)128<=e.charCodeAt(n)&&S("not-basic"),f.push(e.charCodeAt(n));for(i=0<r?r+1:0;i<d;){for(a=p,o=1,s=g;d<=i&&S("invalid-input"),c=e.charCodeAt(i++),(g<=(u=c-48<10?c-22:c-65<26?c-65:c-97<26?c-97:g)||u>E((_-p)/o))&&S("overflow"),p+=u*o,!(u<(h=s<=y?m:y+b<=s?b:s-y));s+=g)o>E(_/(l=g-h))&&S("overflow"),o*=l;y=C(p-a,t=f.length+1,0==a),E(p/t)>_-v&&S("overflow"),v+=E(p/t),p%=t,f.splice(p++,0,v)}return k(f)}function d(e){var t,r,n,i,a,o,s,u,h,l,c,f,d,p,v,y=[];for(f=(e=M(e)).length,t=T,a=x,o=r=0;o<f;++o)(c=e[o])<128&&y.push(O(c));for(n=i=y.length,i&&y.push(w);n<f;){for(s=_,o=0;o<f;++o)t<=(c=e[o])&&c<s&&(s=c);for(s-t>E((_-r)/(d=n+1))&&S("overflow"),r+=(s-t)*d,t=s,o=0;o<f;++o)if((c=e[o])<t&&++r>_&&S("overflow"),c==t){for(u=r,h=g;!(u<(l=h<=a?m:a+b<=h?b:h-a));h+=g)v=u-l,p=g-l,y.push(O(R(l+v%p,0))),u=E(v/p);y.push(O(R(u,0))),a=C(r,d,n==i),r=0,++n}++r,++t}return y.join("")}r={version:"1.4.1",ucs2:{decode:M,encode:k},decode:f,encode:d,toASCII:function(e){return c(e,function(e){return o.test(e)?"xn--"+d(e):e})},toUnicode:function(e){return c(e,function(e){return n.test(e)?f(e.slice(4).toLowerCase()):e})}},void 0===(y=function(){return r}.call(P,I,P,p))||(p.exports=y)}()}).call(this,I(40)(e),I(41))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,r){"use strict";t.decode=t.parse=r(44),t.encode=t.stringify=r(45)},function(e,t,r){"use strict";e.exports=function(e,t,r,n){t=t||"&",r=r||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var o=1e3;n&&"number"==typeof n.maxKeys&&(o=n.maxKeys);var s,u,h=e.length;0<o&&o<h&&(h=o);for(var l=0;l<h;++l){var c,f,d,p,v=e[l].replace(a,"%20"),y=v.indexOf(r);f=0<=y?(c=v.substr(0,y),v.substr(y+1)):(c=v,""),d=decodeURIComponent(c),p=decodeURIComponent(f),s=i,u=d,Object.prototype.hasOwnProperty.call(s,u)?_(i[d])?i[d].push(p):i[d]=[i[d],p]:i[d]=p}return i};var _=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,r){"use strict";var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(r,n,i,e){return n=n||"&",i=i||"=",null===r&&(r=void 0),"object"==typeof r?s(u(r),function(e){var t=encodeURIComponent(a(e))+i;return o(r[e])?s(r[e],function(e){return t+encodeURIComponent(a(e))}).join(n):t+encodeURIComponent(a(r[e]))}).join(n):e?encodeURIComponent(a(e))+i+encodeURIComponent(a(r)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function s(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var u=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(15),h=(n=a)&&n.__esModule?n:{default:n};var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return i(e,[{key:"set",value:function(e,t,r){var n=t.width,i=t.height;if(r){var a=e.width/2/n,o=e.height/2/i,s=e.x/n+a,u=e.y/i+o;r=h.default.add(r,h.default.NW),this.x0=s+a*h.default.uX(r),this.y0=u+o*h.default.uY(r),r=h.default.add(r,2),this.x1=s+a*h.default.uX(r),this.y1=u+o*h.default.uY(r),r=h.default.add(r,2),this.x2=s+a*h.default.uX(r),this.y2=u+o*h.default.uY(r),r=h.default.add(r,2),this.x3=s+a*h.default.uX(r),this.y3=u+o*h.default.uY(r)}else this.x0=e.x/n,this.y0=e.y/i,this.x1=(e.x+e.width)/n,this.y1=e.y/i,this.x2=(e.x+e.width)/n,this.y2=(e.y+e.height)/i,this.x3=e.x/n,this.y3=(e.y+e.height)/i;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)}}]),e}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},o=r(1),s=r(3),u=r(0),h=n(r(13)),l=n(r(11));function n(e){return e&&e.__esModule?e:{default:e}}var c=new o.Point,f=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t._anchor=new o.ObservablePoint(t._onAnchorUpdate,t,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=u.BLEND_MODES.NORMAL,t.shader=null,t.cachedTint=16777215,t.texture=e||h.default.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.pluginName="sprite",t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,l.default),i(n,[{key:"_onTextureUpdate",value:function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,s.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,s.sign)(this.scale.y)*this._height/this._texture.orig.height)}},{key:"_onAnchorUpdate",value:function(){this._transformID=-1,this._transformTrimmedID=-1}},{key:"calculateVertices",value:function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var e=this._texture,t=this.transform.worldTransform,r=t.a,n=t.b,i=t.c,a=t.d,o=t.tx,s=t.ty,u=this.vertexData,h=e.trim,l=e.orig,c=this._anchor,f=0,d=0,p=0,v=0;p=h?(f=(d=h.x-c._x*l.width)+h.width,(v=h.y-c._y*l.height)+h.height):(f=(d=-c._x*l.width)+l.width,(v=-c._y*l.height)+l.height),u[0]=r*d+i*v+o,u[1]=a*v+n*d+s,u[2]=r*f+i*v+o,u[3]=a*v+n*f+s,u[4]=r*f+i*p+o,u[5]=a*p+n*f+s,u[6]=r*d+i*p+o,u[7]=a*p+n*d+s}}},{key:"calculateTrimmedVertices",value:function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var e=this._texture,t=this.vertexTrimmedData,r=e.orig,n=this._anchor,i=this.transform.worldTransform,a=i.a,o=i.b,s=i.c,u=i.d,h=i.tx,l=i.ty,c=-n._x*r.width,f=c+r.width,d=-n._y*r.height,p=d+r.height;t[0]=a*c+s*d+h,t[1]=u*d+o*c+l,t[2]=a*f+s*d+h,t[3]=u*d+o*f+l,t[4]=a*f+s*p+h,t[5]=u*p+o*f+l,t[6]=a*c+s*p+h,t[7]=u*p+o*c+l}},{key:"_renderWebGL",value:function(e){this.calculateVertices(),e.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}},{key:"_renderCanvas",value:function(e){e.plugins[this.pluginName].render(this)}},{key:"_calculateBounds",value:function(){var e=this._texture.trim,t=this._texture.orig;!e||e.width===t.width&&e.height===t.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}},{key:"getLocalBounds",value:function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"getLocalBounds",this).call(this,e)}},{key:"containsPoint",value:function(e){this.worldTransform.applyInverse(e,c);var t=this._texture.orig.width,r=this._texture.orig.height,n=-t*this.anchor.x,i=0;return c.x>=n&&c.x<n+t&&(i=-r*this.anchor.y,c.y>=i&&c.y<i+r)}},{key:"destroy",value:function(e){if(a(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"destroy",this).call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var t="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!t)}this._texture=null,this.shader=null}},{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(e){var t=(0,s.sign)(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(e){var t=(0,s.sign)(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}},{key:"anchor",get:function(){return this._anchor},set:function(e){this._anchor.copy(e)}},{key:"tint",get:function(){return this._tint},set:function(e){this._tint=e,this._tintRGB=(e>>16)+(65280&e)+((255&e)<<16)}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture!==e&&(this._texture=e||h.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.hasLoaded?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}],[{key:"from",value:function(e){return new n(h.default.from(e))}},{key:"fromFrame",value:function(e){var t=s.TextureCache[e];if(!t)throw new Error('The frameId "'+e+'" does not exist in the texture cache');return new n(t)}},{key:"fromImage",value:function(e,t,r){return new n(h.default.fromImage(e,t,r))}}]),n}();t.default=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=h(r(18)),i=h(r(19)),o=h(r(20)),s=h(r(69)),u=(h(r(73)),h(r(74))),j=h(r(2)),N=r(3),F=h(r(4)),U=h(r(12));function h(e){return e&&e.__esModule?e:{default:e}}var B=0,X=0,l=function(e){function i(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).call(this,e));t.vertSize=5,t.vertByteSize=4*t.vertSize,t.size=j.default.SPRITE_BATCH_SIZE,t.buffers=[];for(var r=1;r<=U.default.nextPow2(t.size);r*=2)t.buffers.push(new u.default(4*r*t.vertByteSize));t.indices=(0,o.default)(t.size),t.shader=null,t.currentIndex=0,t.groups=[];for(var n=0;n<t.size;n++)t.groups[n]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return t.sprites=[],t.vertexBuffers=[],t.vaos=[],t.vaoMax=2,t.vertexCount=0,t.renderer.on("prerender",t.onPrerender,t),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,a.default),n(i,[{key:"onContextChange",value:function(){var e=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:this.MAX_TEXTURES=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),j.default.SPRITE_MAX_TEXTURES),this.shader=(0,s.default)(e,this.MAX_TEXTURES),this.indexBuffer=F.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.renderer.bindVao(null);for(var t=this.shader.attributes,r=0;r<this.vaoMax;r++){var n=this.vertexBuffers[r]=F.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),i=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(n,t.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(n,t.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(n,t.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);t.aTextureId&&i.addAttribute(n,t.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=i}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)}},{key:"onPrerender",value:function(){this.vertexCount=0}},{key:"render",value:function(e){this.currentIndex>=this.size&&this.flush(),e._texture._uvs&&(this.sprites[this.currentIndex++]=e)}},{key:"flush",value:function(){if(0!==this.currentIndex){var e=this.renderer.gl,t=this.MAX_TEXTURES,r=U.default.nextPow2(this.currentIndex),n=U.default.log2(r),i=this.buffers[n],a=this.sprites,o=this.groups,s=i.float32View,u=i.uint32View,h=this.boundTextures,l=this.renderer.boundTextures,c=this.renderer.textureGC.count,f=0,d=void 0,p=void 0,v=1,y=0,_=o[0],g=void 0,m=void 0,b=0;_.textureCount=0,_.start=0,_.blend=b,B++;var x=void 0;for(x=0;x<t;++x){var T=l[x];T._enabled!==B?((h[x]=T)._virtalBoundId=x,T._enabled=B):h[x]=this.renderer.emptyTextures[x]}for(B++,x=0;x<this.currentIndex;++x){var w=a[x];a[x]=null,d=w._texture.baseTexture;if(0!==b&&(b=0,p=null,y=t,B++),p!==d&&(p=d)._enabled!==B){if(y===t&&(B++,_.size=x-_.start,y=0,(_=o[v++]).blend=b,_.textureCount=0,_.start=x),d.touched=c,-1===d._virtalBoundId)for(var E=0;E<t;++E){var O=(E+X)%t,S=h[O];if(S._enabled!==B){X++,S._virtalBoundId=-1,h[d._virtalBoundId=O]=d;break}}d._enabled=B,_.textureCount++,_.ids[y]=d._virtalBoundId,_.textures[y++]=d}if(g=w.vertexData,m=w._texture._uvs.uvsUint32,this.renderer.roundPixels){var M=this.renderer.resolution;s[f]=(g[0]*M|0)/M,s[f+1]=(g[1]*M|0)/M,s[f+5]=(g[2]*M|0)/M,s[f+6]=(g[3]*M|0)/M,s[f+10]=(g[4]*M|0)/M,s[f+11]=(g[5]*M|0)/M,s[f+15]=(g[6]*M|0)/M,s[f+16]=(g[7]*M|0)/M}else s[f]=g[0],s[f+1]=g[1],s[f+5]=g[2],s[f+6]=g[3],s[f+10]=g[4],s[f+11]=g[5],s[f+15]=g[6],s[f+16]=g[7];u[f+2]=m[0],u[f+7]=m[1],u[f+12]=m[2],u[f+17]=m[3];var k=Math.min(w.worldAlpha,1),R=k<1&&d.premultipliedAlpha?(0,N.premultiplyTint)(w._tintRGB,k):w._tintRGB+(255*k<<24);u[f+3]=u[f+8]=u[f+13]=u[f+18]=R,s[f+4]=s[f+9]=s[f+14]=s[f+19]=d._virtalBoundId,f+=20}if(_.size=x-_.start,j.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var C=this.shader.attributes,P=this.vertexBuffers[this.vertexCount]=F.default.GLBuffer.createVertexBuffer(e,null,e.STREAM_DRAW),I=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(P,C.aVertexPosition,e.FLOAT,!1,this.vertByteSize,0).addAttribute(P,C.aTextureCoord,e.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(P,C.aColor,e.UNSIGNED_BYTE,!0,this.vertByteSize,12);C.aTextureId&&I.addAttribute(P,C.aTextureId,e.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=I}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(i.vertices,0,!1),this.vertexCount++}for(x=0;x<t;++x)l[x]._virtalBoundId=-1;for(x=0;x<v;++x){for(var A=o[x],D=A.textureCount,L=0;L<D;L++)p=A.textures[L],l[A.ids[L]]!==p&&this.renderer.bindTexture(p,A.ids[L],!0),p._virtalBoundId=-1;this.renderer.state.setBlendMode(A.blend),e.drawElements(e.TRIANGLES,6*A.size,e.UNSIGNED_SHORT,6*A.start*2)}this.currentIndex=0}}},{key:"start",value:function(){this.renderer.bindShader(this.shader),j.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())}},{key:"stop",value:function(){this.flush()}},{key:"destroy",value:function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0}(i.prototype.__proto__||Object.getPrototypeOf(i.prototype),"destroy",this).call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var t=0;t<this.buffers.length;++t)this.buffers[t].destroy()}}]),i}();t.default=l,i.default.registerPlugin("sprite",l)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),o=r(3),s=r(1),u=r(0),h=a(r(2)),l=a(r(11)),c=a(r(50)),i=a(r(5));function a(e){return e&&e.__esModule?e:{default:e}}var f=new s.Matrix,d=function(e){function a(e,t,r,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this));return(0,o.sayHello)(e),"number"==typeof t&&(t=Object.assign({width:t,height:r||h.default.RENDER_OPTIONS.height},n)),t=Object.assign({},h.default.RENDER_OPTIONS,t),i.options=t,i.type=u.RENDERER_TYPE.UNKNOWN,i.screen=new s.Rectangle(0,0,t.width,t.height),i.view=t.view||document.createElement("canvas"),i.resolution=t.resolution||h.default.RESOLUTION,i.transparent=t.transparent,i.autoResize=t.autoResize||!1,i.blendModes=null,i.preserveDrawingBuffer=t.preserveDrawingBuffer,i.clearBeforeRender=t.clearBeforeRender,i.roundPixels=t.roundPixels,i._backgroundColor=0,i._backgroundColorRgba=[0,0,0,0],i._backgroundColorString="#000000",i.backgroundColor=t.backgroundColor||i._backgroundColor,i._tempDisplayObjectParent=new l.default,i._lastObjectRendered=i._tempDisplayObjectParent,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default),n(a,[{key:"resize",value:function(e,t){this.screen.width=e,this.screen.height=t,this.view.width=e*this.resolution,this.view.height=t*this.resolution,this.autoResize&&(this.view.style.width=e+"px",this.view.style.height=t+"px")}},{key:"generateTexture",value:function(e,t,r,n){n=n||e.getLocalBounds();var i=c.default.create(0|n.width,0|n.height,t,r);return f.tx=-n.x,f.ty=-n.y,this.render(e,i,!1,f,!!e.parent),i}},{key:"destroy",value:function(e){e&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=u.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null}},{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(e){this._backgroundColor=e,this._backgroundColorString=(0,o.hex2string)(e),(0,o.hex2rgb)(e,this._backgroundColorRgba)}}]),a}();t.default=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),h=a(r(51)),i=a(r(13));function a(e){return e&&e.__esModule?e:{default:e}}var o=function(e){function u(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u);var r=null;if(!(e instanceof h.default)){var n=arguments[1],i=arguments[2],a=arguments[3],o=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+i+") instead of the ctor directly."),r=arguments[0],t=null,e=new h.default(n,i,a,o)}var s=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(u.__proto__||Object.getPrototypeOf(u)).call(this,e,t));return s.legacyRenderer=r,s.valid=!0,s._updateUvs(),s}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(u,i.default),n(u,[{key:"resize",value:function(e,t,r){e=Math.ceil(e),t=Math.ceil(t),this.valid=0<e&&0<t,this._frame.width=this.orig.width=e,this._frame.height=this.orig.height=t,r||this.baseTexture.resize(e,t),this._updateUvs()}}],[{key:"create",value:function(e,t,r,n){return new u(new h.default(e,t,r,n))}}]),u}();t.default=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=a(r(6)),o=a(r(2));function a(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],n=arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var i=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,null,r));return i.resolution=n||o.default.RESOLUTION,i.width=Math.ceil(e),i.height=Math.ceil(t),i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=void 0!==r?r:o.default.SCALE_MODE,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(a,i.default),n(a,[{key:"resize",value:function(e,t){e=Math.ceil(e),t=Math.ceil(t),e===this.width&&t===this.height||(this.valid=0<e&&0<t,this.width=e,this.height=t,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))}},{key:"destroy",value:function(){(function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0})(a.prototype.__proto__||Object.getPrototypeOf(a.prototype),"destroy",this).call(this,!0),this.renderer=null}}]),a}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=o(r(7)),a=o(r(53));function o(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.scissor=!1,t.scissorData=null,t.scissorRenderTarget=null,t.enableScissor=!0,t.alphaMaskPool=[],t.alphaMaskIndex=0,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.default),n(r,[{key:"pushMask",value:function(e,t){if(t.texture)this.pushSpriteMask(e,t);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&t.isFastRect()){var r=t.worldTransform,n=Math.atan2(r.b,r.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(t):this.pushScissorMask(e,t)}else this.pushStencilMask(t)}},{key:"popMask",value:function(e,t){t.texture?this.popSpriteMask(e,t):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(e,t):this.popStencilMask(e,t)}},{key:"pushSpriteMask",value:function(e,t){var r=this.alphaMaskPool[this.alphaMaskIndex];r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new a.default(t)]),r[0].resolution=this.renderer.resolution,r[0].maskSprite=t,e.filterArea=t.getBounds(!0),this.renderer.filterManager.pushFilter(e,r),this.alphaMaskIndex++}},{key:"popSpriteMask",value:function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--}},{key:"pushStencilMask",value:function(e){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(e)}},{key:"popStencilMask",value:function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()}},{key:"pushScissorMask",value:function(e,t){t.renderable=!0;var r=this.renderer._activeRenderTarget,n=t.getBounds();n.fit(r.size),t.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var i=this.renderer.resolution;this.renderer.gl.scissor(n.x*i,(r.root?r.size.height-n.y-n.height:n.y)*i,n.width*i,n.height*i),this.scissorRenderTarget=r,this.scissorData=t,this.scissor=!0}},{key:"popScissorMask",value:function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var e=this.renderer.gl;e.disable(e.SCISSOR_TEST)}}]),r}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=n(r(54)),o=r(1),s=n(r(56)),u=n(r(57)),h=n(r(58));function n(e){return e&&e.__esModule?e:{default:e}}var l=function(e){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=new o.Matrix,r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,u.default,h.default));return e.renderable=!1,r.maskSprite=e,r.maskMatrix=t,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a.default),i(n,[{key:"apply",value:function(e,t,r){var n=this.maskSprite,i=this.maskSprite.texture;i.valid&&(i.transform||(i.transform=new s.default(i,0)),i.transform.update(),this.uniforms.mask=i,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,n).prepend(i.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=i.transform.uClampFrame,e.applyFilter(this,t,r))}}]),n}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=i(r(55)),o=r(3),s=r(0),u=i(r(2));function i(e){return e&&e.__esModule?e:{default:e}}var h={},l=function(){function i(e,t,r){for(var n in function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.vertexSrc=e||i.defaultVertexSrc,this.fragmentSrc=t||i.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,a.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[n]=this.uniformData[n].value,this.uniformData[n].type&&(this.uniformData[n].type=this.uniformData[n].type.toLowerCase());this.glShaders={},h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=u.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return n(i,[{key:"apply",value:function(e,t,r,n,i){e.applyFilter(this,t,r,n)}},{key:"blendMode",get:function(){return this._blendMode},set:function(e){this._blendMode=e}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),i}();t.default=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,r){var n=a(e),i=a(t);return Object.assign(n,i)};var n,i=r(4);var c=((n=i)&&n.__esModule?n:{default:n}).default.shader.defaultValue;function a(e){for(var t=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},n=void 0,i=e.replace(/\s+/g," ").split(/\s*;\s*/),a=0;a<i.length;a++){var o=i[a].trim();if(-1<o.indexOf("uniform")){var s=o.split(" "),u=s[1],h=s[2],l=1;-1<h.indexOf("[")&&(h=(n=h.split(/\[|]/))[0],l*=Number(n[1])),h.match(t)||(r[h]={value:c(u,l),name:h,type:u})}}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(9),o=(n=a)&&n.__esModule?n:{default:n};var h=new o.default,s=function(){function r(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),this._texture=e,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===t?.5:t}return i(r,[{key:"multiplyUvs",value:function(e,t){void 0===t&&(t=e);for(var r=this.mapCoord,n=0;n<e.length;n+=2){var i=e[n],a=e[n+1];t[n]=i*r.a+a*r.c+r.tx,t[n+1]=i*r.b+a*r.d+r.ty}return t}},{key:"update",value:function(e){var t=this._texture;if(!t||!t.valid)return!1;if(!e&&this._lastTextureID===t._updateID)return!1;this._lastTextureID=t._updateID;var r=t._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var n=t.orig,i=t.trim;i&&(h.set(n.width/i.width,0,0,n.height/i.height,-i.x/i.width,-i.y/i.height),this.mapCoord.append(h));var a=t.baseTexture,o=this.uClampFrame,s=this.clampMargin/a.resolution,u=this.clampOffset;return o[0]=(t._frame.x+s+u)/a.width,o[1]=(t._frame.y+s+u)/a.height,o[2]=(t._frame.x+t._frame.width-s+u)/a.width,o[3]=(t._frame.y+t._frame.height-s+u)/a.height,this.uClampOffset[0]=u/a.realWidth,this.uClampOffset[1]=u/a.realHeight,!0}},{key:"texture",get:function(){return this._texture},set:function(e){this._texture=e,this._lastTextureID=-1}}]),r}();t.default=s},function(e,t){e.exports="#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n"},function(e,t){e.exports="#define GLSLIFY 1\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(7),o=(n=a)&&n.__esModule?n:{default:n};var s=function(e){function r(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.stencilMaskStack=null,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,o.default),i(r,[{key:"setMaskStack",value:function(e){this.stencilMaskStack=e;var t=this.renderer.gl;0===e.length?t.disable(t.STENCIL_TEST):t.enable(t.STENCIL_TEST)}},{key:"pushStencil",value:function(e){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var t=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&t.enable(t.STENCIL_TEST),this.stencilMaskStack.push(e),t.colorMask(!1,!1,!1,!1),t.stencilFunc(t.EQUAL,r,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.INCR),this.renderer.plugins.graphics.render(e),this._useCurrent()}},{key:"popStencil",value:function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var e=this.renderer.gl,t=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(e.disable(e.STENCIL_TEST),e.clear(e.STENCIL_BUFFER_BIT),e.clearStencil(0)):(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),this.renderer.plugins.graphics.render(t),this._useCurrent())}},{key:"_useCurrent",value:function(){var e=this.renderer.gl;e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}},{key:"_getBitwiseMask",value:function(){return(1<<this.stencilMaskStack.length)-1}},{key:"destroy",value:function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null}}]),r}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=c(r(7)),s=c(r(14)),a=c(r(61)),o=r(1),u=c(r(21)),h=function(e){{if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}}(r(62)),l=c(r(12));function c(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function(){function e(){f(this,e),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new o.Rectangle,this.destinationFrame=new o.Rectangle,this.filters=[]}return n(e,[{key:"clear",value:function(){this.filters=null,this.target=null,this.renderTarget=null}}]),e}(),d="screen",v=function(e){function r(e){f(this,r);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,e));return t.gl=t.renderer.gl,t.quad=new a.default(t.gl,e.state.attribState),t.shaderCache={},t.pool={},t.filterData=null,t.managedFilters=[],t.renderer.on("prerender",t.onPrerender,t),t._screenWidth=e.view.width,t._screenHeight=e.view.height,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,i.default),n(r,[{key:"pushFilter",value:function(e,t){var r=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var i=new p;i.sourceFrame=i.destinationFrame=this.renderer._activeRenderTarget.size,i.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[i]},this.filterData=n}var a=n.stack[++n.index],o=n.stack[0].destinationFrame;a||(a=n.stack[n.index]=new p);var s=e.filterArea&&0===e.filterArea.x&&0===e.filterArea.y&&e.filterArea.width===r.screen.width&&e.filterArea.height===r.screen.height,u=t[0].resolution,h=0|t[0].padding,l=s?r.screen:e.filterArea||e.getBounds(!0),c=a.sourceFrame,f=a.destinationFrame;c.x=(l.x*u|0)/u,c.y=(l.y*u|0)/u,c.width=(l.width*u|0)/u,c.height=(l.height*u|0)/u,s||(n.stack[0].renderTarget.transform||t[0].autoFit&&c.fit(o),c.pad(h)),f.width=c.width,f.height=c.height;var d=this.getPotRenderTarget(r.gl,c.width,c.height,u);a.target=e,a.filters=t,a.resolution=u,(a.renderTarget=d).setFrame(f,c),r.bindRenderTarget(d),d.clear()}},{key:"popFilter",value:function(){var e=this.filterData,t=e.stack[e.index-1],r=e.stack[e.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var n=r.filters;if(1===n.length)n[0].apply(this,r.renderTarget,t.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var i=r.renderTarget,a=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);a.setFrame(r.destinationFrame,r.sourceFrame),a.clear();var o=0;for(o=0;o<n.length-1;++o){n[o].apply(this,i,a,!0,r);var s=i;i=a,a=s}n[o].apply(this,i,t.renderTarget,!1,r),this.freePotRenderTarget(i),this.freePotRenderTarget(a)}r.clear(),e.index--,0===e.index&&(this.filterData=null)}},{key:"applyFilter",value:function(e,t,r,n){var i=this.renderer,a=i.gl,o=e.glShaders[i.CONTEXT_UID];o||(e.glShaderKey?(o=this.shaderCache[e.glShaderKey])||(o=new u.default(this.gl,e.vertexSrc,e.fragmentSrc),e.glShaders[i.CONTEXT_UID]=this.shaderCache[e.glShaderKey]=o,this.managedFilters.push(e)):(o=e.glShaders[i.CONTEXT_UID]=new u.default(this.gl,e.vertexSrc,e.fragmentSrc),this.managedFilters.push(e)),i.bindVao(null),this.quad.initVao(o)),i.bindVao(this.quad.vao),i.bindRenderTarget(r),n&&(a.disable(a.SCISSOR_TEST),i.clear(),a.enable(a.SCISSOR_TEST)),r===i.maskManager.scissorRenderTarget&&i.maskManager.pushScissorMask(null,i.maskManager.scissorData),i.bindShader(o);var s=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=s,this.syncUniforms(o,e),i.state.setBlendMode(e.blendMode),a.activeTexture(a.TEXTURE0),a.bindTexture(a.TEXTURE_2D,t.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),a.bindTexture(a.TEXTURE_2D,s._glTextures[this.renderer.CONTEXT_UID].texture)}},{key:"syncUniforms",value:function(e,t){var r=t.uniformData,n=t.uniforms,i=1,a=void 0;if(e.uniforms.filterArea){a=this.filterData.stack[this.filterData.index];var o=e.uniforms.filterArea;o[0]=a.renderTarget.size.width,o[1]=a.renderTarget.size.height,o[2]=a.sourceFrame.x,o[3]=a.sourceFrame.y,e.uniforms.filterArea=o}if(e.uniforms.filterClamp){a=a||this.filterData.stack[this.filterData.index];var s=e.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(a.sourceFrame.width-1)/a.renderTarget.size.width,s[3]=(a.sourceFrame.height-1)/a.renderTarget.size.height,e.uniforms.filterClamp=s}for(var u in r)if(e.uniforms.data[u]){var h=r[u].type;if("sampler2d"===h&&0!==n[u]){if(n[u].baseTexture)e.uniforms[u]=this.renderer.bindTexture(n[u].baseTexture,i);else{e.uniforms[u]=i;var l=this.renderer.gl;this.renderer.boundTextures[i]=this.renderer.emptyTextures[i],l.activeTexture(l.TEXTURE0+i),n[u].texture.bind()}i++}else if("mat3"===h)void 0!==n[u].a?e.uniforms[u]=n[u].toArray(!0):e.uniforms[u]=n[u];else if("vec2"===h)if(void 0!==n[u].x){var c=e.uniforms[u]||new Float32Array(2);c[0]=n[u].x,c[1]=n[u].y,e.uniforms[u]=c}else e.uniforms[u]=n[u];else"float"===h?e.uniforms.data[u].value!==r[u]&&(e.uniforms[u]=n[u]):e.uniforms[u]=n[u]}}},{key:"getRenderTarget",value:function(e,t){var r=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,t||r.resolution);return n.setFrame(r.destinationFrame,r.sourceFrame),n}},{key:"returnRenderTarget",value:function(e){this.freePotRenderTarget(e)}},{key:"calculateScreenSpaceMatrix",value:function(e){var t=this.filterData.stack[this.filterData.index];return h.calculateScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size)}},{key:"calculateNormalizedScreenSpaceMatrix",value:function(e){var t=this.filterData.stack[this.filterData.index];return h.calculateNormalizedScreenSpaceMatrix(e,t.sourceFrame,t.renderTarget.size,t.destinationFrame)}},{key:"calculateSpriteMatrix",value:function(e,t){var r=this.filterData.stack[this.filterData.index];return h.calculateSpriteMatrix(e,r.sourceFrame,r.renderTarget.size,t)}},{key:"destroy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=this.renderer,r=this.managedFilters;t.off("prerender",this.onPrerender,this);for(var n=0;n<r.length;n++)e||r[n].glShaders[t.CONTEXT_UID].destroy(),delete r[n].glShaders[t.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()}},{key:"getPotRenderTarget",value:function(e,t,r,n){var i=d;r*=n,(t*=n)===this._screenWidth&&r===this._screenHeight||(i=(65535&(t=l.default.nextPow2(t)))<<16|65535&(r=l.default.nextPow2(r))),this.pool[i]||(this.pool[i]=[]);var a=this.pool[i].pop();if(!a){var o=this.renderer.boundTextures[0];e.activeTexture(e.TEXTURE0),a=new s.default(e,t,r,null,1),e.bindTexture(e.TEXTURE_2D,o._glTextures[this.renderer.CONTEXT_UID].texture)}return a.resolution=n,a.defaultFrame.width=a.size.width=t/n,a.defaultFrame.height=a.size.height=r/n,a.filterPoolKey=i,a}},{key:"emptyPool",value:function(){for(var e in this.pool){var t=this.pool[e];if(t)for(var r=0;r<t.length;r++)t[r].destroy(!0)}this.pool={}}},{key:"freePotRenderTarget",value:function(e){this.pool[e.filterPoolKey].push(e)}},{key:"onPrerender",value:function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var e=this.pool[d];if(e)for(var t=0;t<e.length;t++)e[t].destroy(!0);this.pool[d]=[]}}}]),r}();t.default=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=n(r(4)),o=n(r(20));function n(e){return e&&e.__esModule?e:{default:e}}var s=function(){function n(e,t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,o.default)(1),this.vertexBuffer=a.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=a.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new a.default.VertexArrayObject(e,t)}return i(n,[{key:"initVao",value:function(e){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,e.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,e.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)}},{key:"map",value:function(e,t){var r=0,n=0;return this.uvs[0]=r,this.uvs[1]=n,this.uvs[2]=r+t.width/e.width,this.uvs[3]=n,this.uvs[4]=r+t.width/e.width,this.uvs[5]=n+t.height/e.height,this.uvs[6]=r,this.uvs[7]=n+t.height/e.height,r=t.x,n=t.y,this.vertices[0]=r,this.vertices[1]=n,this.vertices[2]=r+t.width,this.vertices[3]=n,this.vertices[4]=r+t.width,this.vertices[5]=n+t.height,this.vertices[6]=r,this.vertices[7]=n+t.height,this}},{key:"upload",value:function(){for(var e=0;e<4;e++)this.interleaved[4*e]=this.vertices[2*e],this.interleaved[4*e+1]=this.vertices[2*e+1],this.interleaved[4*e+2]=this.uvs[2*e],this.interleaved[4*e+3]=this.uvs[2*e+1];return this.vertexBuffer.upload(this.interleaved),this}},{key:"destroy",value:function(){var e=this.gl;e.deleteBuffer(this.vertexBuffer),e.deleteBuffer(this.indexBuffer)}}]),n}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateScreenSpaceMatrix=function(e,t,r){var n=e.identity();return n.translate(t.x/r.width,t.y/r.height),n.scale(r.width,r.height),n},t.calculateNormalizedScreenSpaceMatrix=function(e,t,r){var n=e.identity();n.translate(t.x/r.width,t.y/r.height);var i=r.width/t.width,a=r.height/t.height;return n.scale(i,a),n},t.calculateSpriteMatrix=function(e,t,r,n){var i=n._texture.orig,a=e.set(r.width,0,0,r.height,t.x,t.y),o=n.worldTransform.copy(s.Matrix.TEMP_MATRIX);return o.invert(),a.prepend(o),a.scale(1/i.width,1/i.height),a.translate(n.anchor.x,n.anchor.y),a};var s=r(1)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),u=r(4),h=r(0),a=r(14),l=(n=a)&&n.__esModule?n:{default:n},o=r(3);var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return i(t,[{key:"bindTexture",value:function(){}},{key:"getTexture",value:function(){}},{key:"updateTexture",value:function(e,t){var r=this.gl,n=!!e._glRenderTargets;if(!e.hasLoaded)return null;var i=this.renderer.boundTextures;if(void 0===t)for(var a=t=0;a<i.length;++a)if(i[a]===e){t=a;break}i[t]=e,r.activeTexture(r.TEXTURE0+t);var o=e._glTextures[this.renderer.CONTEXT_UID];if(o)n?e._glRenderTargets[this.renderer.CONTEXT_UID].resize(e.width,e.height):o.upload(e.source);else{if(n){var s=new l.default(this.gl,e.width,e.height,e.scaleMode,e.resolution);s.resize(e.width,e.height),o=(e._glRenderTargets[this.renderer.CONTEXT_UID]=s).texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(o=new u.GLTexture(this.gl,null,null,null,null)).bind(t),o.premultiplyAlpha=!0,o.upload(e.source);e._glTextures[this.renderer.CONTEXT_UID]=o,e.on("update",this.updateTexture,this),e.on("dispose",this.destroyTexture,this),this._managedTextures.push(e),e.isPowerOfTwo?(e.mipmap&&o.enableMipmap(),e.wrapMode===h.WRAP_MODES.CLAMP?o.enableWrapClamp():e.wrapMode===h.WRAP_MODES.REPEAT?o.enableWrapRepeat():o.enableWrapMirrorRepeat()):o.enableWrapClamp(),e.scaleMode===h.SCALE_MODES.NEAREST?o.enableNearestScaling():o.enableLinearScaling()}return o}},{key:"destroyTexture",value:function(e,t){if((e=e.baseTexture||e).hasLoaded){var r=this.renderer.CONTEXT_UID,n=e._glTextures,i=e._glRenderTargets;if(n[r]&&(this.renderer.unbindTexture(e),n[r].destroy(),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this),delete n[r],!t)){var a=this._managedTextures.indexOf(e);-1!==a&&(0,o.removeItems)(this._managedTextures,a,1)}i&&i[r]&&(i[r].destroy(),delete i[r])}}},{key:"removeAll",value:function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];t._glTextures[this.renderer.CONTEXT_UID]&&delete t._glTextures[this.renderer.CONTEXT_UID]}}},{key:"destroy",value:function(){for(var e=0;e<this._managedTextures.length;++e){var t=this._managedTextures[e];this.destroyTexture(t,!0),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this)}this._managedTextures=null}}]),t}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(0),o=r(2),s=(n=o)&&n.__esModule?n:{default:n};var u=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return i(t,[{key:"update",value:function(){this.count++,this.mode!==a.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))}},{key:"run",value:function(){for(var e=this.renderer.textureManager,t=e._managedTextures,r=!1,n=0;n<t.length;n++){var i=t[n];!i._glRenderTargets&&this.count-i.touched>this.maxIdle&&(e.destroyTexture(i,!0),r=!(t[n]=null))}if(r){for(var a=0,o=0;o<t.length;o++)null!==t[o]&&(t[a++]=t[o]);t.length=a}}},{key:"unload",value:function(e){var t=this.renderer.textureManager;e._texture&&e._texture._glRenderTargets&&t.destroyTexture(e._texture,!0);for(var r=e.children.length-1;0<=r;r--)this.unload(e.children[r])}}]),t}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),a=r(66),o=(n=a)&&n.__esModule?n:{default:n};var s=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return i(t,[{key:"push",value:function(){var e=this.stack[this.stackIndex];e||(e=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var t=0;t<this.activeState.length;t++)e[t]=this.activeState[t]}},{key:"pop",value:function(){var e=this.stack[--this.stackIndex];this.setState(e)}},{key:"setState",value:function(e){this.setBlend(e[0]),this.setDepthTest(e[1]),this.setFrontFace(e[2]),this.setCullFace(e[3]),this.setBlendMode(e[4])}},{key:"setBlend",value:function(e){e=e?1:0,this.activeState[0]!==e&&(this.activeState[0]=e,this.gl[e?"enable":"disable"](this.gl.BLEND))}},{key:"setBlendMode",value:function(e){if(e!==this.activeState[4]){this.activeState[4]=e;var t=this.blendModes[e];2===t.length?this.gl.blendFunc(t[0],t[1]):this.gl.blendFuncSeparate(t[0],t[1],t[2],t[3])}}},{key:"setDepthTest",value:function(e){e=e?1:0,this.activeState[1]!==e&&(this.activeState[1]=e,this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST))}},{key:"setCullFace",value:function(e){e=e?1:0,this.activeState[3]!==e&&(this.activeState[3]=e,this.gl[e?"enable":"disable"](this.gl.CULL_FACE))}},{key:"setFrontFace",value:function(e){e=e?1:0,this.activeState[2]!==e&&(this.activeState[2]=e,this.gl.frontFace(this.gl[e?"CW":"CCW"]))}},{key:"resetAttributes",value:function(){for(var e=0;e<this.attribState.tempAttribState.length;e++)this.attribState.tempAttribState[e]=0;for(var t=0;t<this.attribState.attribState.length;t++)this.attribState.attribState[t]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)}},{key:"resetToDefault",value:function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var e=0;e<this.activeState.length;++e)this.activeState[e]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)}}]),t}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return t[n.BLEND_MODES.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD]=[e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR],t[n.BLEND_MODES.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[n.BLEND_MODES.ADD_NPM]=[e.SRC_ALPHA,e.DST_ALPHA,e.ONE,e.DST_ALPHA],t[n.BLEND_MODES.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_COLOR],t};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return t[n.DRAW_MODES.POINTS]=e.POINTS,t[n.DRAW_MODES.LINES]=e.LINES,t[n.DRAW_MODES.LINE_LOOP]=e.LINE_LOOP,t[n.DRAW_MODES.LINE_STRIP]=e.LINE_STRIP,t[n.DRAW_MODES.TRIANGLES]=e.TRIANGLES,t[n.DRAW_MODES.TRIANGLE_STRIP]=e.TRIANGLE_STRIP,t[n.DRAW_MODES.TRIANGLE_FAN]=e.TRIANGLE_FAN,t};var n=r(0)},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=u.default,n=h;n=(n=n.replace(/%count%/gi,t)).replace(/%forloop%/gi,function(e){var t="";t+="\n",t+="\n";for(var r=0;r<e;r++)0<r&&(t+="\nelse "),r<e-1&&(t+="if(textureId == "+r+".0)"),t+="\n{",t+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",t+="\n}";return t+="\n",t+="\n"}(t));for(var i=new s.default(e,r,n),a=[],o=0;o<t;o++)a[o]=o;return i.bind(),i.uniforms.uSamplers=a,i};var s=n(r(21)),u=n(r(70));r(71);function n(e){return e&&e.__esModule?e:{default:e}}var h=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(e,t){e.exports="precision highp float;\n#define GLSLIFY 1\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n"},function(e,h,t){(function(i){function a(e,t){for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];"."===i?e.splice(n,1):".."===i?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(e){return t.exec(e).slice(1)};function s(e,t){if(e.filter)return e.filter(t);for(var r=[],n=0;n<e.length;n++)t(e[n],n,e)&&r.push(e[n]);return r}h.resolve=function(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var n=0<=r?arguments[r]:i.cwd();if("string"!=typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(e=n+"/"+e,t="/"===n.charAt(0))}return(t?"/":"")+(e=a(s(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},h.normalize=function(e){var t=h.isAbsolute(e),r="/"===n(e,-1);return(e=a(s(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},h.isAbsolute=function(e){return"/"===e.charAt(0)},h.join=function(){var e=Array.prototype.slice.call(arguments,0);return h.normalize(s(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},h.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=h.resolve(e).substr(1),t=h.resolve(t).substr(1);for(var n=r(e.split("/")),i=r(t.split("/")),a=Math.min(n.length,i.length),o=a,s=0;s<a;s++)if(n[s]!==i[s]){o=s;break}var u=[];for(s=o;s<n.length;s++)u.push("..");return(u=u.concat(i.slice(o))).join("/")},h.sep="/",h.delimiter=":",h.dirname=function(e){var t=o(e),r=t[0],n=t[1];return r||n?(n&&(n=n.substr(0,n.length-1)),r+n):"."},h.basename=function(e,t){var r=o(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},h.extname=function(e){return o(e)[3]};var n="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,t(72))},function(e,t){var r,n,i=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===a||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:a}catch(e){r=a}try{n="function"==typeof clearTimeout?clearTimeout:o}catch(e){n=o}}();var u,h=[],l=!1,c=-1;function f(){l&&u&&(l=!1,u.length?h=u.concat(h):c=-1,h.length&&d())}function d(){if(!l){var e=s(f);l=!0;for(var t=h.length;t;){for(u=h,h=[];++c<t;)u&&u[c].run();c=-1,t=h.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===o||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];h.push(new p(e,t)),1!==h.length||l||s(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var r=!t;if(0===e)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var n=document.createElement("canvas");n.width=1,n.height=1,t=o.default.createContext(n)}var i=t.createShader(t.FRAGMENT_SHADER);for(;;){var a=s.replace(/%forloop%/gi,u(e));if(t.shaderSource(i,a),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS))break;e=e/2|0}r&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").loseContext();return e};var n,i=r(4),o=(n=i)&&n.__esModule?n:{default:n};var s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function u(e){for(var t="",r=0;r<e;++r)0<r&&(t+="\nelse "),r<e-1&&(t+="if(test == "+r+".0){}");return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return n(t,[{key:"destroy",value:function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null}}]),t}();t.default=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Ticker=t.shared=void 0;var n,i=r(76),a=(n=i)&&n.__esModule?n:{default:n};var o=new a.default;o.autoStart=!0,o.destroy=function(){},t.shared=o,t.Ticker=a.default},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),i=s(r(2)),a=r(0),o=s(r(77));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._head=new o.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}return n(e,[{key:"_requestIfNeeded",value:function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))}},{key:"_cancelIfNeeded",value:function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}},{key:"_startIfPossible",value:function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}},{key:"add",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new o.default(e,t,r))}},{key:"addOnce",value:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:a.UPDATE_PRIORITY.NORMAL;return this._addListener(new o.default(e,t,r,!0))}},{key:"_addListener",value:function(e){var t=this._head.next,r=this._head;if(t){for(;t;){if(e.priority>t.priority){e.connect(r);break}t=(r=t).next}e.previous||e.connect(r)}else e.connect(r);return this._startIfPossible(),this}},{key:"remove",value:function(e,t){for(var r=this._head.next;r;)r=r.match(e,t)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this}},{key:"start",value:function(){this.started||(this.started=!0,this._requestIfNeeded())}},{key:"stop",value:function(){this.started&&(this.started=!1,this._cancelIfNeeded())}},{key:"destroy",value:function(){this.stop();for(var e=this._head.next;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}},{key:"update",value:function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),t=void 0;if(e>this.lastTime){(t=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(t=this._maxElapsedMS),this.deltaTime=t*i.default.TARGET_FPMS*this.speed;for(var r=this._head,n=r.next;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e}},{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(e){var t=Math.min(Math.max(0,e)/1e3,i.default.TARGET_FPMS);this._maxElapsedMS=1/t}}]),e}();t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}();var i=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),this.fn=e,this.context=t,this.priority=r,this.once=n,this.next=null,this.previous=null,this._destroyed=!1}return n(i,[{key:"match",value:function(e,t){return t=t||null,this.fn===e&&this.context===t}},{key:"emit",value:function(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));var t=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),t}},{key:"connect",value:function(e){(this.previous=e).next&&(e.next.previous=this),this.next=e.next,e.next=this}},{key:"destroy",value:function(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var t=this.next;return this.next=e?null:t,this.previous=null,t}}]),i}();t.default=i}])});
//# sourceMappingURL=vf-renderer.min.js.map